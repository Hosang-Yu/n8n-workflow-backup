{"updatedAt":"2025-09-18T05:49:59.934Z","createdAt":"2025-06-17T07:22:44.213Z","id":"4nWGYnkRxM91fcUN","name":"02.ì¤‘ì†Œê¸°ì—…ê¸°ìˆ ì •ë³´ì§„í¥ì›","active":true,"isArchived":false,"nodes":[{"parameters":{"jsCode":"const links = $input.first().json.link;\nconst names = $input.first().json.name;\nconst bNames = $input.first().json.b_name;\nconst durations = $input.first().json.duration;\nconst noticeDates = $input.first().json.notice_date;\nreturn links.map((link, i) => {\n  return {link: $('settings').first().json.base_url + link, name: names[i], bName: bNames[i], duration: durations[i], noticeDate: noticeDates[i]}\n})"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[64,160],"id":"f9307fd8-78a3-4bd1-a8a0-cf7d34ba7abb","name":"Code1"},{"parameters":{"method":"POST","url":"http://192.168.10.133:8000/convert","sendBody":true,"contentType":"multipart-form-data","bodyParameters":{"parameters":[{"parameterType":"formBinaryData","name":"file","inputDataFieldName":"data"}]},"options":{"redirect":{"redirect":{}}}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[2288,-176],"id":"cefea13f-fef2-472f-ae80-c00697059518","name":"Convert Hwp to pdf","retryOnFail":true,"onError":"continueErrorOutput"},{"parameters":{"method":"POST","url":"https://api.mistral.ai/v1/files","authentication":"predefinedCredentialType","nodeCredentialType":"mistralCloudApi","sendBody":true,"contentType":"multipart-form-data","bodyParameters":{"parameters":[{"name":"purpose","value":"ocr"},{"parameterType":"formBinaryData","name":"=file","inputDataFieldName":"data"}]},"options":{"allowUnauthorizedCerts":false}},"id":"f3dc8fca-500d-4179-9fab-1d8f44debcb8","name":"Upload a img1","type":"n8n-nodes-base.httpRequest","position":[2432,64],"typeVersion":4.2,"alwaysOutputData":true,"credentials":{"mistralCloudApi":{"id":"DMvGIk4nGb1Gfy0K","name":"Mistral Cloud account 2"}}},{"parameters":{"url":"=https://api.mistral.ai/v1/files/{{ $json.id }}/url","authentication":"predefinedCredentialType","nodeCredentialType":"mistralCloudApi","sendQuery":true,"queryParameters":{"parameters":[{"name":"expiry","value":"24"}]},"options":{"allowUnauthorizedCerts":false}},"id":"1e870d23-b24c-4989-8652-1b5eb90212c9","name":"Retrieve img3","type":"n8n-nodes-base.httpRequest","position":[2752,64],"typeVersion":4.2,"credentials":{"mistralCloudApi":{"id":"DMvGIk4nGb1Gfy0K","name":"Mistral Cloud account 2"}}},{"parameters":{"method":"POST","url":"https://api.mistral.ai/v1/chat/completions","authentication":"predefinedCredentialType","nodeCredentialType":"mistralCloudApi","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Content-Type","value":"application/json"}]},"sendBody":true,"specifyBody":"json","jsonBody":"={\n  \"model\": \"mistral-small-latest\",\n  \"messages\": [\n    {\n      \"role\": \"user\",\n      \"content\": [\n        {\n          \"type\": \"text\",\n          \"text\": \"ì²¨ë¶€í•œ PDFì—ì„œ pblanc_nm(ê³µê³ ì œëª©), jrsd_instt_nm(ëŒ€ìƒ ì§€ì—­), ì£¼ìµœê¸°ê´€(exc_instt_nm), bsns_sumry_cn(ê³µê³ ìš”ì•½), target_nm(ëŒ€ìƒê¸°ì—…), reqst_begin_end_de(ê³µê³  ì „ì²´ê¸°ê°„ í˜•ì‹ì€ 'YYYYMMDD ~ YYYYMMDD'), reqst_begin_dt(ê³µê³ ì‹œì‘ê¸°ê°„ YYYY-MM-DD), reqst_end_dt(ê³µê³ ë§ˆê°ê¸°ê°„ YYYY-MM-DD), reqst_mth_papers_cn(ì‚¬ì—…ì‹ ì²­ë°©ë²•), refrnc_nm(ë¬¸ì˜ì²˜), ì§€ì›ê¸ˆì•¡(subsidy_amount), ê°€ì ìš”ì†Œ(bonus_points_factors), ì˜ˆì‚°(total_budget), ìë¶€ë‹´ë¥ (self_contribution_rate) ì— ëŒ€í•œ ì •ë³´ë¥¼ ì•Œë ¤ì¤˜. ë§Œì•½ ìë£Œê°€ ì—†ë‹¤ë©´ nullìœ¼ë¡œë¼ë„ ì•Œë ¤ì¤˜. ì‘ë‹µì€ json í˜•íƒœì•¼.\\n\\në˜í•œ ì§€ì—­ëª…(jrsd_instt_nm)ì€ {{ $('settings').item.json.cityMap.values() }} ì¤‘ í•˜ë‚˜ë¡œ ì¶œë ¥ë˜ê²Œ í•´ì£¼ê³ , ë§Œì•½ ì—†ë‹¤ë©´ nullë¡œ ì¶œë ¥í•´ì¤˜. ê·¸ë¦¬ê³  reqst_begin_end_de(ê³µê³  ì „ì²´ê¸°ê°„)ì˜ í˜•ì‹ì€ ë°˜ë“œì‹œ 'YYYYMMDD ~ YYYYMMDD'ì˜ í˜•íƒœë¡œ í•´ì¤˜. ê·¸ë¦¬ê³  ëŒ€ìƒê¸°ì—…(target_nm)ì€ ì¤‘ì†Œê¸°ì—…,ëŒ€ê¸°ì—… ì¤‘ ê³¨ë¼ì„œ í•´ì£¼ê³  ë‘˜ ë‹¤ ì§€ì›í•œë‹¤ë©´ 'ì¤‘ì†Œê¸°ì—…,ëŒ€ê¸°ì—…'ìœ¼ë¡œ ì¶œë ¥í•´ì¤˜. ì•Œ ìˆ˜ ì—†ìœ¼ë©´ nullì´ì•¼.\\n\\nmain_category: ê³µê³ ì˜ ì£¼ìš” ë¶„ë¥˜ë¥¼ ë‹¤ìŒ í•­ëª© ì¤‘ì—ì„œ ì •í™•í•˜ê²Œ ì¶”ì¶œí•´ì¤˜. í•´ë‹¹ë˜ëŠ” í•­ëª©ì´ ì—¬ëŸ¬ ê°œì¸ ê²½ìš° ì½¤ë§ˆ(,)ë¡œ êµ¬ë¶„í•´ì„œ ì¶œë ¥í•´ì¤˜. ì•„ë˜ í•­ëª© ì¤‘ ì ì ˆí•œ í‚¤ì›Œë“œê°€ ê³µê³  ë‚´ìš©ì— ì¡´ì¬í•  ê²½ìš°, ê°€ì¥ ê°€ê¹Œìš´ í•­ëª©ìœ¼ë¡œ íŒë‹¨í•´ì„œ ì„ íƒí•´ì¤˜. ë‹¨, ëª…í™•í•œ í‚¤ì›Œë“œê°€ ì—†ê±°ë‚˜ ë¶„ë¥˜í•˜ê¸° ì• ë§¤í•œ ê²½ìš°ì—ëŠ” ë¹ˆ ë¬¸ìì—´(\\\"\\\")ë¡œ í‘œì‹œí•´ì¤˜.\\n\\n[ì„ íƒ ê°€ëŠ¥í•œ í•­ëª© ëª©ë¡]\\nìŠ¤ë§ˆíŠ¸ìƒíƒœê³µì¥,ìƒìƒí˜‘ë ¥ ì‹¤ì¦í”„ë¡œê·¸ë¨,ìŠ¤ë§ˆíŠ¸ê³µì¥ / ì œì¡°í˜ì‹ ,íƒ„ì†Œì¤‘ë¦½ / ì˜¨ì‹¤ê°€ìŠ¤ì €ê°,FEMS ì—ë„ˆì§€íš¨ìœ¨í™”,ë§ˆì¼€íŒ… / ê¸°ìˆ ì¸í”„ë¼ êµ¬ì¶•\\n\\nì¶œë ¥ ì˜ˆì‹œ:\\n\\\"ì»¨ì„¤íŒ…,ìŠ¤ë§ˆíŠ¸ìƒíƒœê³µì¥\\\"\\n\\n---\\n\\nsub_category: ê³µê³  ë‚´ìš© ì¤‘ ë‹¤ìŒ ì„¤ë¹„ ëª©ë¡ì—ì„œ ì–¸ê¸‰ëœ í•­ëª©ë§Œ ê³¨ë¼ ì½¤ë§ˆ(,)ë¡œ êµ¬ë¶„í•˜ì—¬ ì¶œë ¥í•´ì¤˜. ìœ ì‚¬ í‘œí˜„ì´ ìˆì„ ê²½ìš° íŒë‹¨í•´ì„œ í¬í•¨í•´ë„ ë˜ì§€ë§Œ, ì•„ë˜ ëª©ë¡ì— ì—†ëŠ” í•­ëª©ì€ ì ˆëŒ€ ì¶”ê°€í•˜ì§€ ë§ˆì„¸ìš”. ì–´ë–¤ ì„¤ë¹„ë„ ì–¸ê¸‰ë˜ì§€ ì•Šì•˜ì„ ê²½ìš°ì—ëŠ” ë¹ˆ ë¬¸ìì—´(\\\"\\\")ë¡œ ì¶œë ¥í•´ì¤˜.\\n\\n[ì„¤ë¹„ ëª©ë¡]\\në³€ì••ê¸°, íìœ ì¬í™œìš©ì„¤ë¹„, ì†¡í’ê¸°, ì‹ ì¬ìƒë°œì „ì„¤ë¹„, ì§‘ì§„ê¸°, íŒí”„, ì½¤í”„ë ˆì…”, ê³µê¸°ì¡°í™”ê¸°, ì—´íšŒìˆ˜í™˜ê¸°ì¥ì¹˜, ë³´ì¼ëŸ¬, ì—´êµí™˜ê¸°, ë°°ì¶œê°€ìŠ¤ì²˜ë¦¬ê¸°, ê³µê¸°ì •í™”ê¸°, íƒˆí™©ê¸°, íƒˆì§ˆê¸°, ì˜¤ìˆ˜ì²˜ë¦¬ê¸°, íìˆ˜ì²˜ë¦¬ê¸°, ëƒ‰ê°íƒ‘, ì—ë„ˆì§€ê´€ë¦¬ì‹œìŠ¤í…œ, ê³µì •ì œì–´ì‹œìŠ¤í…œ, ìë™í™”ì‹œìŠ¤í…œ, ëƒ‰ë™ê¸°, ì¦ê¸°ì¬ì••ì¶•ì¥ì¹˜, íì—´íšŒìˆ˜ì‹œìŠ¤í…œ, ìœ ìˆ˜ë¶„ë¦¬ê¸°, ì••ì¶•ê¸°, ì¸ë²„í„°, ìš©í•´ë¡œ, ì‘ì¶•ìˆ˜íšŒìˆ˜ê¸°, ì•…ì·¨ì €ê°ì„¤ë¹„, ì‚¬ì¶œì„±í˜•ê¸°\\n\\nì¶œë ¥ ì˜ˆì‹œ:\\n\\\"ì¸ë²„í„°,ìš©í•´ë¡œ\\\"\\n\\nì£¼ì˜ì‚¬í•­:\\n- ì„¤ë¹„ ì´ë¦„ì€ ë°˜ë“œì‹œ ìœ„ ëª©ë¡ì—ì„œë§Œ ì„ íƒí•´ì•¼ í•˜ë©°, ìƒˆë¡œìš´ í•­ëª©ì„ ìƒì„±í•˜ê±°ë‚˜ ì„ì˜ë¡œ ì¶”ê°€í•˜ì§€ ë§ ê²ƒ\\n- ê´€ë ¨ì„±ì´ ë‚®ê±°ë‚˜ íŒë‹¨ì´ ì–´ë ¤ìš¸ ê²½ìš°ì—ë„ ë¹ˆ ë¬¸ìì—´(\\\"\\\")ë¡œ ì²˜ë¦¬í•  ê²ƒ\\n- ì¶œë ¥ì€ í•­ìƒ ë¬¸ìì—´ì´ë©°, nullì´ ì•„ë‹Œ ë¹ˆ ë¬¸ìì—´(\\\"\\\")ë¡œ í‘œì‹œ\"\n        },\n        {\n          \"type\": \"document_url\",\n          \"document_url\": \"{{ $json.url }}\"\n        }\n      ]\n    }\n  ],\n  \"document_image_limit\": 8,\n  \"document_page_limit\": 64\n}\n","options":{"allowUnauthorizedCerts":false,"response":{"response":{"responseFormat":"json"}}}},"id":"637b01b1-9f6f-4fd6-acb4-3196aa82ce98","name":"do documnet qna","type":"n8n-nodes-base.httpRequest","position":[2912,64],"typeVersion":4.2,"alwaysOutputData":true,"credentials":{"mistralCloudApi":{"id":"DMvGIk4nGb1Gfy0K","name":"Mistral Cloud account 2"}}},{"parameters":{"url":"=https://api.mistral.ai/v1/files/{{ $json.id }}","authentication":"predefinedCredentialType","nodeCredentialType":"mistralCloudApi","options":{"allowUnauthorizedCerts":false}},"id":"7f16abbf-02d9-4f29-9b8f-f50e4ac351ca","name":"Retrieve img1","type":"n8n-nodes-base.httpRequest","position":[2592,64],"typeVersion":4.2,"credentials":{"mistralCloudApi":{"id":"DMvGIk4nGb1Gfy0K","name":"Mistral Cloud account 2"}}},{"parameters":{"assignments":{"assignments":[{"id":"dca754ac-4479-4295-ab21-47d895f62cae","name":"pblanc_nm","value":"={{ $('markdown json parse to json').item.json.a.pblanc_nm }}","type":"string"},{"id":"0f927bf2-d7a7-4973-aac7-2717bed23371","name":"jrsd_instt_nm","value":"={{ $('markdown json parse to json').item.json.a.jrsd_instt_nm }}","type":"string"},{"id":"8d6fa575-7d4d-44d6-aaf8-9f967d478af6","name":"bsns_sumry_cn","value":"={{ $('markdown json parse to json').item.json.a.bsns_sumry_cn }}","type":"string"},{"id":"01a4c2d1-ab75-4e73-90a8-7bf79e5f8cd5","name":"trget_nm","value":"={{ $('markdown json parse to json').item.json.a.target_nm }}","type":"string"},{"id":"9507037a-7c15-4819-8357-0805d0904d7c","name":"reqst_begin_end_de","value":"={{ $('markdown json parse to json').item.json.a.reqst_begin_end_de }}","type":"string"},{"id":"47c24bf8-ce6b-40be-a8fd-93d8d1b03a19","name":"reqst_begin_dt","value":"={{ $('markdown json parse to json').item.json.a.reqst_begin_dt }}","type":"string"},{"id":"e3053a53-0200-4b96-88df-30b9bec65e62","name":"reqst_end_dt","value":"={{ $('markdown json parse to json').item.json.a.reqst_end_dt }}","type":"string"},{"id":"b78de255-6269-44b3-9097-50b993f40bfc","name":"refrnc_nm","value":"={{ $('markdown json parse to json').item.json.a.refrnc_nm }}","type":"string"},{"id":"b5e49522-9965-4e13-90b1-86edf56df9c2","name":"print_flpth_nm","value":"={{ $('settings').item.json.attach_file_donwload }}?atchFileId={{ $('print_flpth_nm extract').item.json.print_flpth_nm }}","type":"string"},{"id":"7e662533-f931-4a90-9dfb-f1386c206c8f","name":"print_file_nm","value":"={{ $('print_flpth_nm extract').item.json.print_file_nm }}","type":"string"},{"id":"607940df-de0c-4780-b040-d59037564076","name":"flpth_nm","value":"=","type":"string"},{"id":"1c9dd011-16d0-42d5-b17d-342b58975048","name":"file_nm","value":"=","type":"string"},{"id":"9f54d932-dd37-4175-b8cb-2d855891f65f","name":"subsidy_amount","value":"null","type":"object"},{"id":"8e2d8fb4-cebd-42c1-b12a-e673a77fc802","name":"self_contribution_rate","value":"null","type":"object"},{"id":"f12e819d-409d-436e-b658-684ba9ac8e30","name":"support_target","value":"null","type":"object"},{"id":"83e3ad1a-3ad2-4b72-a477-b123113b2e4a","name":"bonus_points_factors","value":"null","type":"object"},{"id":"d324fdce-53d0-453d-a211-7318d5935647","name":"total_budget","value":"null","type":"object"},{"id":"ad017264-5276-4798-91e5-7bf6f8a07b31","name":"subsidy_amount_type","value":"text","type":"string"},{"id":"0839db3e-060e-4a18-9831-915f28600652","name":"total_budget_type","value":"text","type":"string"},{"id":"75a37755-271f-4797-a2c7-cf650db294e8","name":"source","value":"={{ $('settings').item.json.source }}","type":"string"},{"id":"e9fe45e7-7eff-4e79-b8f8-91e76209dc2e","name":"reqst_mth_papers_cn","value":"={{ $('markdown json parse to json').item.json.a.reqst_mth_papers_cn }}","type":"string"},{"id":"5cff9144-b022-4c25-820e-86ab012b1321","name":"subsidy_amount","value":"={{ $('markdown json parse to json').item.json.a.subsidy_amount }}","type":"string"},{"id":"576eb6a4-e3a6-4c33-812c-e9cd0823b08c","name":"self_contribution_rate","value":"={{ $('markdown json parse to json').item.json.a.self_contribution_rate }}","type":"string"},{"id":"43c7d965-2238-45ca-9747-6a7d29a31896","name":"support_target","value":"={{ $('markdown json parse to json').item.json.a.target_nm }}","type":"string"},{"id":"5b6af3c3-cb7c-4c9e-bba9-a613a8ba3825","name":"bonus_points_factors","value":"={{ $('markdown json parse to json').item.json.a.bonus_points_factors }}","type":"string"},{"id":"3e892a8d-2f7a-4545-926c-16c4f7a624ab","name":"total_budget","value":"={{ $('markdown json parse to json').item.json.a.total_budget }}","type":"string"},{"id":"16575838-a2c6-459b-9593-77cebceffb55","name":"exc_instt_nm","value":"={{ $('markdown json parse to json').item.json.a.exc_instt_nm }}","type":"string"},{"id":"d41de8d0-9cc2-4a7b-a070-b178eef5a063","name":"creat_p_nttm","value":"={{ $now }}","type":"string"},{"id":"6985c4a8-ba48-4d92-aeeb-14ae0e9a5ef3","name":"created_ts","value":"={{ $now }}","type":"string"},{"id":"2bc59630-e41c-4f5a-a3b1-40ea84ef72a8","name":"pldir_sport_realm_lclas_code_nm","value":"ê¸°ìˆ ","type":"string"},{"id":"aff536ed-a418-4150-b586-d8f02a29010a","name":"is_classified","value":"N","type":"string"},{"id":"c8ddd444-4119-41a8-a219-3c99af755179","name":"del_yn","value":"N","type":"string"},{"id":"6e7c28e0-4e24-4003-8c36-3a4de0485fd5","name":"hide_yn","value":"N","type":"string"},{"id":"c9f7b77a-5ea0-416a-a74e-0699b17e88c5","name":"pblanc_url","value":"={{ $('is it after yesterday').item.json.link }}","type":"string"},{"id":"141bc6ac-3577-4887-a105-0b5e75c1bfcb","name":"main_category","value":"={{ $('markdown json parse to json').item.json.a.main_category }}","type":"string"},{"id":"1f794eef-05f3-4a7e-b40d-28d810706220","name":"sub_category","value":"={{ $('markdown json parse to json').item.json.a.sub_category }}","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[3584,64],"id":"68244283-dc9d-4c07-a889-fd1000e79dca","name":"ai result"},{"parameters":{"operation":"upsert","table":{"__rl":true,"value":"biz_info","mode":"list","cachedResultName":"biz_info"},"columnToMatchOn":"pblanc_nm","options":{"detailedOutput":true}},"type":"n8n-nodes-base.mySql","typeVersion":2.4,"position":[3744,64],"id":"dc9d4e28-2700-44ca-93ae-b00c7989336c","name":"MySQL","credentials":{"mySql":{"id":"HSXhV0YEF0PlSVWX","name":"MySQL account"}},"onError":"continueErrorOutput"},{"parameters":{"method":"POST","url":"={{ $('settings').item.json.attach_file_donwload }}","sendQuery":true,"queryParameters":{"parameters":[{"name":"=atchFileId","value":"={{ $json.print_flpth_nm }}"}]},"options":{"response":{"response":{"fullResponse":true,"responseFormat":"file"}}}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[1872,-176],"id":"19e5cd2d-c1d6-451d-a905-2764a2ac0e4b","name":"download hwp or pdf file"},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"7e7014ba-2d17-442a-a5f7-fa05200aade8","leftValue":"={{ $json.print_flpth_nm != null }}","rightValue":"null","operator":{"type":"boolean","operation":"true","singleValue":true}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[1648,-128],"id":"211e96fb-8dde-4b00-9395-d15233d3cbb6","name":"it has attach file?"},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"5c9a293c-b804-4cde-8646-67f1c5e459b3","leftValue":"={{$binary.data.fileName}}","rightValue":".hwp","operator":{"type":"string","operation":"endsWith"}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[2128,-176],"id":"67402e62-1054-42d6-8c20-ec879e511498","name":"it is hwp file?"},{"parameters":{"assignments":{"assignments":[{"id":"7fe9592c-31de-41ce-bdf1-b6fd7ca58090","name":"base_url","value":"https://www.smtech.go.kr","type":"string"},{"id":"6c938b6f-b5c3-45d6-925a-b60fa01b7b4c","name":"attach_file_donwload","value":"https://www.smtech.go.kr/front/comn/AtchFileDownload.do","type":"string"},{"id":"54f1cc9c-1bef-4198-98fd-d77ba404444b","name":"cityMap","value":"{   \"ì„œìš¸\": \"ì„œìš¸íŠ¹ë³„ì‹œ\",   \"ë¶€ì‚°\": \"ë¶€ì‚°ê´‘ì—­ì‹œ\",   \"ëŒ€êµ¬\": \"ëŒ€êµ¬ê´‘ì—­ì‹œ\",   \"ì¸ì²œ\": \"ì¸ì²œê´‘ì—­ì‹œ\",   \"ê´‘ì£¼\": \"ê´‘ì£¼ê´‘ì—­ì‹œ\",   \"ëŒ€ì „\": \"ëŒ€ì „ê´‘ì—­ì‹œ\",   \"ìš¸ì‚°\": \"ìš¸ì‚°ê´‘ì—­ì‹œ\",   \"ì„¸ì¢…\": \"ì„¸ì¢…íŠ¹ë³„ìì¹˜ì‹œ\",   \"ê²½ê¸°\": \"ê²½ê¸°ë„\",   \"ê°•ì›\": \"ê°•ì›ë„\",   \"ì¶©ë¶\": \"ì¶©ì²­ë¶ë„\",   \"ì¶©ë‚¨\": \"ì¶©ì²­ë‚¨ë„\",   \"ì „ë¶\": \"ì „ë¼ë¶ë„\",   \"ì „ë‚¨\": \"ì „ë¼ë‚¨ë„\",   \"ê²½ë¶\": \"ê²½ìƒë¶ë„\",   \"ê²½ë‚¨\": \"ê²½ìƒë‚¨ë„\",   \"ì œì£¼\": \"ì œì£¼íŠ¹ë³„ìì¹˜ë„\",   \"ì „ì§€ì—­\": \"ì „ì§€ì—­\" }","type":"object"},{"id":"c281e3b0-9ecc-4a1b-b057-ecd1796d81c3","name":"source","value":"ì¤‘ì†Œê¸°ì—…ê¸°ìˆ ì •ë³´ì§„í¥ì›","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[-544,-208],"id":"dd9d5ae3-179e-48b6-b4f2-e7a3810cfa49","name":"settings"},{"parameters":{"url":"https://www.smtech.go.kr/front/ifg/no/notice02_list.do","options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-320,-208],"id":"16264398-e872-48b3-8522-27958e846d08","name":"board list request"},{"parameters":{"operation":"extractHtmlContent","extractionValues":{"values":[{"key":"link","cssSelector":"table> tbody > tr > td > a.board","returnValue":"attribute","attribute":"href","returnArray":true},{"key":"b_name","cssSelector":"table> tbody > tr > td.ac:nth-child(2)","returnArray":true},{"key":"name","cssSelector":"table> tbody > tr > td > a.board","returnArray":true},{"key":"duration","cssSelector":"table> tbody > tr > td:nth-child(4)","returnArray":true},{"key":"notice_date","cssSelector":"table> tbody > tr > td:nth-child(5)","returnArray":true},{"key":"status","cssSelector":"table> tbody > tr > td:nth-child(6) > img","returnValue":"attribute","attribute":"alt","returnArray":true}]},"options":{}},"type":"n8n-nodes-base.html","typeVersion":1.2,"position":[-112,-208],"id":"de0ca230-c768-4cbe-b5bc-60071129a306","name":"extract board list"},{"parameters":{"jsCode":"const links = $input.first().json.link;\nconst names = $input.first().json.name;\nconst bNames = $input.first().json.b_name;\nconst durations = $input.first().json.duration;\nconst noticeDates = $input.first().json.notice_date;\nconst statusList = $input.first().json.status\nreturn statusList\n  .filter((item) => item == \"ì ‘ìˆ˜ì¤‘\" || item == \"ì ‘ìˆ˜ì˜ˆì •\")\n  .map((status, i) => {\n  return {link: $('settings').first().json.base_url + links[i], name: names[i], bName: bNames[i], duration: durations[i], noticeDate: noticeDates[i],\n         status: status}\n})"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[128,-208],"id":"80f511f5-a795-48b6-be98-b0fef8ac8328","name":"retrieve with status ì ‘ìˆ˜ì¤‘ or ì ‘ìˆ˜ì˜ˆì •"},{"parameters":{"options":{"reset":"={{ $node[\"batch\"].context[\"done\"] }}"}},"type":"n8n-nodes-base.splitInBatches","typeVersion":3,"position":[368,-208],"id":"62bd8a8a-d957-4eeb-9ae8-5a8f6b11ecdd","name":"batch"},{"parameters":{"url":"={{ $('is it after yesterday').item.json.link }}","options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[1072,-128],"id":"87284516-483b-4a2e-beb4-b0e2db32589d","name":"board detail request"},{"parameters":{"operation":"extractHtmlContent","extractionValues":{"values":[{"key":"title","cssSelector":"table.tbl_base > tbody > tr:nth-child(2) > td"},{"key":"b_title","cssSelector":"table.tbl_base > tbody > tr:nth-child(1) > td"},{"key":"jrsd_instt_nm","cssSelector":"table.tbl_base > tbody > tr:nth-child(3) > td"},{"key":"reqst_begin_dt","cssSelector":"table.tbl_base > tbody > tr:nth-child(4) > td:nth-child(2)"},{"key":"reqst_end_dt","cssSelector":"table.tbl_base > tbody > tr:nth-child(4) > td:nth-child(4)"},{"key":"print_flpth_nm","cssSelector":"table.tbl_base > tbody > tr:nth-child(5) > td > p > a","returnValue":"attribute","attribute":"href"},{"key":"print_file_nm","cssSelector":"table.tbl_base > tbody > tr:nth-child(5) > td > p > a"}]},"options":{"cleanUpText":true}},"type":"n8n-nodes-base.html","typeVersion":1.2,"position":[1248,-128],"id":"195ae71e-2336-4f7e-8278-9a7af1cfbcf8","name":"extract board detail items"},{"parameters":{"jsCode":"const str = $input.first().json.print_flpth_nm;\nvar match = null;\nif(str){\n  match = str.match(/\\((.*)\\)/);\n}\n\nif (match) {\n  const inside = match[1];\n  $input.first().json.print_flpth_nm = inside.split(',')[0].replaceAll(\"'\", \"\");\n}\n\nreturn $input.all();"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[1440,-128],"id":"574fbf31-3799-4b5a-973a-61c6cf086273","name":"print_flpth_nm extract"},{"parameters":{"jsCode":"function extractJsonFromString(str) {\n  const jsonMatch = str.match(/```json\\s*([\\s\\S]*?)\\s*```/);\n  if (jsonMatch && jsonMatch[1]) {\n    try {\n      const obj = JSON.parse(jsonMatch[1]);\n\n      // pblanc_nm í•„ë“œê°€ ìˆìœ¼ë©´ ê´„í˜¸ ì œê±°\n      if (obj && obj.a && obj.a.pblanc_nm) {\n        obj.a.pblanc_nm = obj.a.pblanc_nm.replace(/[\\(\\[][^()\\[\\]]+[\\)\\]]/g, '').trim();\n      }\n\n      return obj;\n    } catch (e) {\n      console.error(\"JSON íŒŒì‹± ì—ëŸ¬:\", e);\n    }\n  }\n  return null;\n}\n\nreturn { a: extractJsonFromString($input.first().json.choices[0].message.content) }\n"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[3088,64],"id":"2bd4162b-15c9-4450-9a11-e887d0fe086f","name":"markdown json parse to json"},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"55c92ba5-6f07-4451-938b-42c624dcdcd0","leftValue":"={{ $json.noticeDate }}","rightValue":"={{ $today.minus(1, 'days') }}","operator":{"type":"dateTime","operation":"afterOrEquals"}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[592,-96],"id":"582e86db-2b71-4387-abe0-9e02d6e4761e","name":"is it after yesterday"},{"parameters":{"jsCode":"// íŒŒì¼ëª… ì¶”ì¶œ í•¨ìˆ˜ëŠ” ìœ ì§€í•˜ë˜ ì‚¬ìš© ì•ˆ í•¨\nfunction getFileName(disposition) {\n    const utf8FilenameRegex = /filename\\*=UTF-8''([\\w%\\-\\.]+)(?:; ?|$)/i;\n    const asciiFilenameRegex = /^filename=([\"']?)(.*?[^\\\\])\\1(?:; ?|$)/i;\n\n    let fileName = null;\n    if (utf8FilenameRegex.test(disposition)) {\n        fileName = decodeURIComponent(utf8FilenameRegex.exec(disposition)[1]);\n    } else {\n        const filenameStart = disposition.toLowerCase().indexOf('filename=');\n        if (filenameStart >= 0) {\n            const partialDisposition = disposition.slice(filenameStart);\n            const matches = asciiFilenameRegex.exec(partialDisposition);\n            if (matches != null && matches[2]) {\n                fileName = matches[2];\n            }\n        }\n    }\n    return fileName;\n}\n\n// ğŸ‘‰ íŒŒì¼ëª… ë¬´ì¡°ê±´ test.hwpë¡œ ì„¤ì •\n$input.item.binary.data.fileName = $('print_flpth_nm extract').first().json.print_file_nm;\n\nreturn $input.item;\n"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[2000,-176],"id":"b188a8e5-a6a2-46ea-9a1a-1498eb5a7927","name":"Code"},{"parameters":{"operation":"select","table":{"__rl":true,"value":"biz_info","mode":"list","cachedResultName":"biz_info"},"where":{"values":[{"column":"pblanc_nm","condition":"LIKE","value":"={{ $json.a.pblanc_nm }}"}]},"options":{}},"type":"n8n-nodes-base.mySql","typeVersion":2.4,"position":[3232,-96],"id":"5ff4bc7b-3d08-4efe-99d4-2177767b7a6d","name":"MySQL1","alwaysOutputData":true,"credentials":{"mySql":{"id":"HSXhV0YEF0PlSVWX","name":"MySQL account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"2d3aee72-46af-4378-99b4-a974ed6c6c5c","leftValue":"={{ $json.a.jrsd_instt_nm }}","rightValue":"","operator":{"type":"string","operation":"empty","singleValue":true}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[3424,64],"id":"4a3043b3-4c29-4849-8787-0f2893b255fa","name":"If1"},{"parameters":{"content":"ì£¼ì†Œ\n\nhttps://www.smtech.go.kr/front/ifg/no/notice02_list.do","height":80,"width":440},"type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[-768,-320],"id":"826a55e6-6832-490d-92bb-8efae0a733a4","name":"Sticky Note"},{"parameters":{"jsCode":"let title = $input.first().json.name || '';\n\n// ê´„í˜¸ ë˜ëŠ” ëŒ€ê´„í˜¸ ì•ˆì˜ ë‚´ìš© ì œê±°\ntitle = title.replace(/[\\(\\[][^()\\[\\]]+[\\)\\]]/g, '').trim();\n\nreturn [\n  {\n    json: {\n      title\n    }\n  }\n];\n\n\n"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[688,-320],"id":"cea67d67-044e-4197-b76e-9354a68a0a59","name":"ì¤‘ë³µ ìë£Œ ì¡°íšŒ"},{"parameters":{"operation":"select","table":{"__rl":true,"value":"biz_info","mode":"list","cachedResultName":"biz_info"},"where":{"values":[{"column":"pblanc_nm","condition":"LIKE","value":"={{ $json.title }}"}]},"options":{}},"type":"n8n-nodes-base.mySql","typeVersion":2.4,"position":[832,-320],"id":"57a4fdb4-d2a2-41dd-ac0f-21bc15cc6f2a","name":"ì¤‘ë³µì¡°íšŒ MYSQL","alwaysOutputData":true,"credentials":{"mySql":{"id":"HSXhV0YEF0PlSVWX","name":"MySQL account"}},"onError":"continueErrorOutput"},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"2d3aee72-46af-4378-99b4-a974ed6c6c5c","leftValue":"={{ $json.pblanc_nm }}","rightValue":"","operator":{"type":"string","operation":"empty","singleValue":true}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[960,-320],"id":"4063fab2-d2db-4861-90a0-5e81f0e00dff","name":"ì¤‘ë³µì¡°íšŒ IF"},{"parameters":{"rule":{"interval":[{"triggerAtHour":11,"triggerAtMinute":50}]}},"type":"n8n-nodes-base.scheduleTrigger","typeVersion":1.2,"position":[-688,-16],"id":"5a1f4665-ef3a-47bc-a298-f042d94ca42a","name":"Schedule Trigger"},{"parameters":{"table":{"__rl":true,"value":"n8n_crawl_summary","mode":"list","cachedResultName":"n8n_crawl_summary"},"dataMode":"defineBelow","valuesToSend":{"values":[{"column":"workflow_name","value":"={{ $workflow.name }}"},{"column":"total_count","value":"={{ $json.notice_date.length }}"},{"column":"type","value":"total_count"}]},"options":{}},"type":"n8n-nodes-base.mySql","typeVersion":2.5,"position":[384,320],"id":"9cd474bf-4a20-40f2-83f9-570dc85315d0","name":"ê³µê³ ìƒíƒœì „ì²´ê°œìˆ˜ì €ì¥","credentials":{"mySql":{"id":"s7XNBHZtTOH7C66M","name":"MySQL account 2"}}},{"parameters":{"jsCode":"// Function ë…¸ë“œ ì•ˆ\nreturn [\n  {\n    json: {\n      workflowName: $workflow.name,\n      insertId:$input.first().json.data.insertId\n    }\n  }\n];\n"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[3904,-112],"id":"b064bad4-5714-4889-87ee-6e71016a4c9a","name":"ê³µê³ ìƒíƒœì •ë¦¬"},{"parameters":{"table":{"__rl":true,"value":"n8n_crawl_summary","mode":"list","cachedResultName":"n8n_crawl_summary"},"dataMode":"defineBelow","valuesToSend":{"values":[{"column":"workflow_name","value":"={{ $workflow.name }}"},{"column":"insertId","value":"={{ $json.insertId }}"},{"column":"type","value":"detail"}]},"options":{}},"type":"n8n-nodes-base.mySql","typeVersion":2.5,"position":[4112,-112],"id":"8bdb169b-8bf8-4c68-b15c-66922cf6d862","name":"ê³µê³ ìƒíƒœìƒì„¸ì €ì¥","credentials":{"mySql":{"id":"s7XNBHZtTOH7C66M","name":"MySQL account 2"}}}],"connections":{"Retrieve img3":{"main":[[{"node":"do documnet qna","type":"main","index":0}]]},"Upload a img1":{"main":[[{"node":"Retrieve img1","type":"main","index":0}]]},"Retrieve img1":{"main":[[{"node":"Retrieve img3","type":"main","index":0}]]},"Convert Hwp to pdf":{"main":[[{"node":"Upload a img1","type":"main","index":0}]]},"do documnet qna":{"main":[[{"node":"markdown json parse to json","type":"main","index":0}]]},"ai result":{"main":[[{"node":"MySQL","type":"main","index":0}]]},"MySQL":{"main":[[{"node":"batch","type":"main","index":0},{"node":"ê³µê³ ìƒíƒœì •ë¦¬","type":"main","index":0}],[{"node":"batch","type":"main","index":0}]]},"download hwp or pdf file":{"main":[[{"node":"Code","type":"main","index":0}]]},"it has attach file?":{"main":[[{"node":"download hwp or pdf file","type":"main","index":0}],[{"node":"batch","type":"main","index":0}]]},"it is hwp file?":{"main":[[{"node":"Convert Hwp to pdf","type":"main","index":0}],[{"node":"Upload a img1","type":"main","index":0}]]},"settings":{"main":[[{"node":"board list request","type":"main","index":0}]]},"board list request":{"main":[[{"node":"extract board list","type":"main","index":0}]]},"extract board list":{"main":[[{"node":"retrieve with status ì ‘ìˆ˜ì¤‘ or ì ‘ìˆ˜ì˜ˆì •","type":"main","index":0},{"node":"ê³µê³ ìƒíƒœì „ì²´ê°œìˆ˜ì €ì¥","type":"main","index":0}]]},"retrieve with status ì ‘ìˆ˜ì¤‘ or ì ‘ìˆ˜ì˜ˆì •":{"main":[[{"node":"batch","type":"main","index":0}]]},"batch":{"main":[[],[{"node":"is it after yesterday","type":"main","index":0}]]},"board detail request":{"main":[[{"node":"extract board detail items","type":"main","index":0}]]},"extract board detail items":{"main":[[{"node":"print_flpth_nm extract","type":"main","index":0}]]},"print_flpth_nm extract":{"main":[[{"node":"it has attach file?","type":"main","index":0}]]},"markdown json parse to json":{"main":[[{"node":"MySQL1","type":"main","index":0},{"node":"If1","type":"main","index":0}]]},"is it after yesterday":{"main":[[{"node":"ì¤‘ë³µ ìë£Œ ì¡°íšŒ","type":"main","index":0}]]},"Code":{"main":[[{"node":"it is hwp file?","type":"main","index":0}]]},"MySQL1":{"main":[[{"node":"If1","type":"main","index":0}]]},"If1":{"main":[[{"node":"ai result","type":"main","index":0}]]},"ì¤‘ë³µ ìë£Œ ì¡°íšŒ":{"main":[[{"node":"ì¤‘ë³µì¡°íšŒ MYSQL","type":"main","index":0}]]},"ì¤‘ë³µì¡°íšŒ MYSQL":{"main":[[{"node":"ì¤‘ë³µì¡°íšŒ IF","type":"main","index":0}]]},"ì¤‘ë³µì¡°íšŒ IF":{"main":[[{"node":"board detail request","type":"main","index":0}],[{"node":"batch","type":"main","index":0}]]},"Schedule Trigger":{"main":[[{"node":"settings","type":"main","index":0}]]},"ê³µê³ ìƒíƒœì •ë¦¬":{"main":[[{"node":"ê³µê³ ìƒíƒœìƒì„¸ì €ì¥","type":"main","index":0}]]}},"settings":{"executionOrder":"v1","callerPolicy":"workflowsFromSameOwner","errorWorkflow":"Mlhukb9mbuzpvwkH"},"staticData":{"node:Schedule Trigger":{"recurrenceRules":[]}},"meta":null,"pinData":{},"versionId":"f85fc390-c887-4590-ac24-2030d20083c8","activeVersionId":"f85fc390-c887-4590-ac24-2030d20083c8","triggerCount":1,"shared":[{"updatedAt":"2025-06-17T07:22:44.213Z","createdAt":"2025-06-17T07:22:44.213Z","role":"workflow:owner","workflowId":"4nWGYnkRxM91fcUN","projectId":"YGqg9zdxGQSC73yC"}],"activeVersion":{"updatedAt":"2025-12-20T02:52:22.088Z","createdAt":"2025-12-20T02:52:22.088Z","versionId":"f85fc390-c887-4590-ac24-2030d20083c8","workflowId":"4nWGYnkRxM91fcUN","nodes":[{"parameters":{"jsCode":"const links = $input.first().json.link;\nconst names = $input.first().json.name;\nconst bNames = $input.first().json.b_name;\nconst durations = $input.first().json.duration;\nconst noticeDates = $input.first().json.notice_date;\nreturn links.map((link, i) => {\n  return {link: $('settings').first().json.base_url + link, name: names[i], bName: bNames[i], duration: durations[i], noticeDate: noticeDates[i]}\n})"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[64,160],"id":"f9307fd8-78a3-4bd1-a8a0-cf7d34ba7abb","name":"Code1"},{"parameters":{"method":"POST","url":"http://192.168.10.133:8000/convert","sendBody":true,"contentType":"multipart-form-data","bodyParameters":{"parameters":[{"parameterType":"formBinaryData","name":"file","inputDataFieldName":"data"}]},"options":{"redirect":{"redirect":{}}}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[2288,-176],"id":"cefea13f-fef2-472f-ae80-c00697059518","name":"Convert Hwp to pdf","retryOnFail":true,"onError":"continueErrorOutput"},{"parameters":{"method":"POST","url":"https://api.mistral.ai/v1/files","authentication":"predefinedCredentialType","nodeCredentialType":"mistralCloudApi","sendBody":true,"contentType":"multipart-form-data","bodyParameters":{"parameters":[{"name":"purpose","value":"ocr"},{"parameterType":"formBinaryData","name":"=file","inputDataFieldName":"data"}]},"options":{"allowUnauthorizedCerts":false}},"id":"f3dc8fca-500d-4179-9fab-1d8f44debcb8","name":"Upload a img1","type":"n8n-nodes-base.httpRequest","position":[2432,64],"typeVersion":4.2,"alwaysOutputData":true,"credentials":{"mistralCloudApi":{"id":"DMvGIk4nGb1Gfy0K","name":"Mistral Cloud account 2"}}},{"parameters":{"url":"=https://api.mistral.ai/v1/files/{{ $json.id }}/url","authentication":"predefinedCredentialType","nodeCredentialType":"mistralCloudApi","sendQuery":true,"queryParameters":{"parameters":[{"name":"expiry","value":"24"}]},"options":{"allowUnauthorizedCerts":false}},"id":"1e870d23-b24c-4989-8652-1b5eb90212c9","name":"Retrieve img3","type":"n8n-nodes-base.httpRequest","position":[2752,64],"typeVersion":4.2,"credentials":{"mistralCloudApi":{"id":"DMvGIk4nGb1Gfy0K","name":"Mistral Cloud account 2"}}},{"parameters":{"method":"POST","url":"https://api.mistral.ai/v1/chat/completions","authentication":"predefinedCredentialType","nodeCredentialType":"mistralCloudApi","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Content-Type","value":"application/json"}]},"sendBody":true,"specifyBody":"json","jsonBody":"={\n  \"model\": \"mistral-small-latest\",\n  \"messages\": [\n    {\n      \"role\": \"user\",\n      \"content\": [\n        {\n          \"type\": \"text\",\n          \"text\": \"ì²¨ë¶€í•œ PDFì—ì„œ pblanc_nm(ê³µê³ ì œëª©), jrsd_instt_nm(ëŒ€ìƒ ì§€ì—­), ì£¼ìµœê¸°ê´€(exc_instt_nm), bsns_sumry_cn(ê³µê³ ìš”ì•½), target_nm(ëŒ€ìƒê¸°ì—…), reqst_begin_end_de(ê³µê³  ì „ì²´ê¸°ê°„ í˜•ì‹ì€ 'YYYYMMDD ~ YYYYMMDD'), reqst_begin_dt(ê³µê³ ì‹œì‘ê¸°ê°„ YYYY-MM-DD), reqst_end_dt(ê³µê³ ë§ˆê°ê¸°ê°„ YYYY-MM-DD), reqst_mth_papers_cn(ì‚¬ì—…ì‹ ì²­ë°©ë²•), refrnc_nm(ë¬¸ì˜ì²˜), ì§€ì›ê¸ˆì•¡(subsidy_amount), ê°€ì ìš”ì†Œ(bonus_points_factors), ì˜ˆì‚°(total_budget), ìë¶€ë‹´ë¥ (self_contribution_rate) ì— ëŒ€í•œ ì •ë³´ë¥¼ ì•Œë ¤ì¤˜. ë§Œì•½ ìë£Œê°€ ì—†ë‹¤ë©´ nullìœ¼ë¡œë¼ë„ ì•Œë ¤ì¤˜. ì‘ë‹µì€ json í˜•íƒœì•¼.\\n\\në˜í•œ ì§€ì—­ëª…(jrsd_instt_nm)ì€ {{ $('settings').item.json.cityMap.values() }} ì¤‘ í•˜ë‚˜ë¡œ ì¶œë ¥ë˜ê²Œ í•´ì£¼ê³ , ë§Œì•½ ì—†ë‹¤ë©´ nullë¡œ ì¶œë ¥í•´ì¤˜. ê·¸ë¦¬ê³  reqst_begin_end_de(ê³µê³  ì „ì²´ê¸°ê°„)ì˜ í˜•ì‹ì€ ë°˜ë“œì‹œ 'YYYYMMDD ~ YYYYMMDD'ì˜ í˜•íƒœë¡œ í•´ì¤˜. ê·¸ë¦¬ê³  ëŒ€ìƒê¸°ì—…(target_nm)ì€ ì¤‘ì†Œê¸°ì—…,ëŒ€ê¸°ì—… ì¤‘ ê³¨ë¼ì„œ í•´ì£¼ê³  ë‘˜ ë‹¤ ì§€ì›í•œë‹¤ë©´ 'ì¤‘ì†Œê¸°ì—…,ëŒ€ê¸°ì—…'ìœ¼ë¡œ ì¶œë ¥í•´ì¤˜. ì•Œ ìˆ˜ ì—†ìœ¼ë©´ nullì´ì•¼.\\n\\nmain_category: ê³µê³ ì˜ ì£¼ìš” ë¶„ë¥˜ë¥¼ ë‹¤ìŒ í•­ëª© ì¤‘ì—ì„œ ì •í™•í•˜ê²Œ ì¶”ì¶œí•´ì¤˜. í•´ë‹¹ë˜ëŠ” í•­ëª©ì´ ì—¬ëŸ¬ ê°œì¸ ê²½ìš° ì½¤ë§ˆ(,)ë¡œ êµ¬ë¶„í•´ì„œ ì¶œë ¥í•´ì¤˜. ì•„ë˜ í•­ëª© ì¤‘ ì ì ˆí•œ í‚¤ì›Œë“œê°€ ê³µê³  ë‚´ìš©ì— ì¡´ì¬í•  ê²½ìš°, ê°€ì¥ ê°€ê¹Œìš´ í•­ëª©ìœ¼ë¡œ íŒë‹¨í•´ì„œ ì„ íƒí•´ì¤˜. ë‹¨, ëª…í™•í•œ í‚¤ì›Œë“œê°€ ì—†ê±°ë‚˜ ë¶„ë¥˜í•˜ê¸° ì• ë§¤í•œ ê²½ìš°ì—ëŠ” ë¹ˆ ë¬¸ìì—´(\\\"\\\")ë¡œ í‘œì‹œí•´ì¤˜.\\n\\n[ì„ íƒ ê°€ëŠ¥í•œ í•­ëª© ëª©ë¡]\\nìŠ¤ë§ˆíŠ¸ìƒíƒœê³µì¥,ìƒìƒí˜‘ë ¥ ì‹¤ì¦í”„ë¡œê·¸ë¨,ìŠ¤ë§ˆíŠ¸ê³µì¥ / ì œì¡°í˜ì‹ ,íƒ„ì†Œì¤‘ë¦½ / ì˜¨ì‹¤ê°€ìŠ¤ì €ê°,FEMS ì—ë„ˆì§€íš¨ìœ¨í™”,ë§ˆì¼€íŒ… / ê¸°ìˆ ì¸í”„ë¼ êµ¬ì¶•\\n\\nì¶œë ¥ ì˜ˆì‹œ:\\n\\\"ì»¨ì„¤íŒ…,ìŠ¤ë§ˆíŠ¸ìƒíƒœê³µì¥\\\"\\n\\n---\\n\\nsub_category: ê³µê³  ë‚´ìš© ì¤‘ ë‹¤ìŒ ì„¤ë¹„ ëª©ë¡ì—ì„œ ì–¸ê¸‰ëœ í•­ëª©ë§Œ ê³¨ë¼ ì½¤ë§ˆ(,)ë¡œ êµ¬ë¶„í•˜ì—¬ ì¶œë ¥í•´ì¤˜. ìœ ì‚¬ í‘œí˜„ì´ ìˆì„ ê²½ìš° íŒë‹¨í•´ì„œ í¬í•¨í•´ë„ ë˜ì§€ë§Œ, ì•„ë˜ ëª©ë¡ì— ì—†ëŠ” í•­ëª©ì€ ì ˆëŒ€ ì¶”ê°€í•˜ì§€ ë§ˆì„¸ìš”. ì–´ë–¤ ì„¤ë¹„ë„ ì–¸ê¸‰ë˜ì§€ ì•Šì•˜ì„ ê²½ìš°ì—ëŠ” ë¹ˆ ë¬¸ìì—´(\\\"\\\")ë¡œ ì¶œë ¥í•´ì¤˜.\\n\\n[ì„¤ë¹„ ëª©ë¡]\\në³€ì••ê¸°, íìœ ì¬í™œìš©ì„¤ë¹„, ì†¡í’ê¸°, ì‹ ì¬ìƒë°œì „ì„¤ë¹„, ì§‘ì§„ê¸°, íŒí”„, ì½¤í”„ë ˆì…”, ê³µê¸°ì¡°í™”ê¸°, ì—´íšŒìˆ˜í™˜ê¸°ì¥ì¹˜, ë³´ì¼ëŸ¬, ì—´êµí™˜ê¸°, ë°°ì¶œê°€ìŠ¤ì²˜ë¦¬ê¸°, ê³µê¸°ì •í™”ê¸°, íƒˆí™©ê¸°, íƒˆì§ˆê¸°, ì˜¤ìˆ˜ì²˜ë¦¬ê¸°, íìˆ˜ì²˜ë¦¬ê¸°, ëƒ‰ê°íƒ‘, ì—ë„ˆì§€ê´€ë¦¬ì‹œìŠ¤í…œ, ê³µì •ì œì–´ì‹œìŠ¤í…œ, ìë™í™”ì‹œìŠ¤í…œ, ëƒ‰ë™ê¸°, ì¦ê¸°ì¬ì••ì¶•ì¥ì¹˜, íì—´íšŒìˆ˜ì‹œìŠ¤í…œ, ìœ ìˆ˜ë¶„ë¦¬ê¸°, ì••ì¶•ê¸°, ì¸ë²„í„°, ìš©í•´ë¡œ, ì‘ì¶•ìˆ˜íšŒìˆ˜ê¸°, ì•…ì·¨ì €ê°ì„¤ë¹„, ì‚¬ì¶œì„±í˜•ê¸°\\n\\nì¶œë ¥ ì˜ˆì‹œ:\\n\\\"ì¸ë²„í„°,ìš©í•´ë¡œ\\\"\\n\\nì£¼ì˜ì‚¬í•­:\\n- ì„¤ë¹„ ì´ë¦„ì€ ë°˜ë“œì‹œ ìœ„ ëª©ë¡ì—ì„œë§Œ ì„ íƒí•´ì•¼ í•˜ë©°, ìƒˆë¡œìš´ í•­ëª©ì„ ìƒì„±í•˜ê±°ë‚˜ ì„ì˜ë¡œ ì¶”ê°€í•˜ì§€ ë§ ê²ƒ\\n- ê´€ë ¨ì„±ì´ ë‚®ê±°ë‚˜ íŒë‹¨ì´ ì–´ë ¤ìš¸ ê²½ìš°ì—ë„ ë¹ˆ ë¬¸ìì—´(\\\"\\\")ë¡œ ì²˜ë¦¬í•  ê²ƒ\\n- ì¶œë ¥ì€ í•­ìƒ ë¬¸ìì—´ì´ë©°, nullì´ ì•„ë‹Œ ë¹ˆ ë¬¸ìì—´(\\\"\\\")ë¡œ í‘œì‹œ\"\n        },\n        {\n          \"type\": \"document_url\",\n          \"document_url\": \"{{ $json.url }}\"\n        }\n      ]\n    }\n  ],\n  \"document_image_limit\": 8,\n  \"document_page_limit\": 64\n}\n","options":{"allowUnauthorizedCerts":false,"response":{"response":{"responseFormat":"json"}}}},"id":"637b01b1-9f6f-4fd6-acb4-3196aa82ce98","name":"do documnet qna","type":"n8n-nodes-base.httpRequest","position":[2912,64],"typeVersion":4.2,"alwaysOutputData":true,"credentials":{"mistralCloudApi":{"id":"DMvGIk4nGb1Gfy0K","name":"Mistral Cloud account 2"}}},{"parameters":{"url":"=https://api.mistral.ai/v1/files/{{ $json.id }}","authentication":"predefinedCredentialType","nodeCredentialType":"mistralCloudApi","options":{"allowUnauthorizedCerts":false}},"id":"7f16abbf-02d9-4f29-9b8f-f50e4ac351ca","name":"Retrieve img1","type":"n8n-nodes-base.httpRequest","position":[2592,64],"typeVersion":4.2,"credentials":{"mistralCloudApi":{"id":"DMvGIk4nGb1Gfy0K","name":"Mistral Cloud account 2"}}},{"parameters":{"assignments":{"assignments":[{"id":"dca754ac-4479-4295-ab21-47d895f62cae","name":"pblanc_nm","value":"={{ $('markdown json parse to json').item.json.a.pblanc_nm }}","type":"string"},{"id":"0f927bf2-d7a7-4973-aac7-2717bed23371","name":"jrsd_instt_nm","value":"={{ $('markdown json parse to json').item.json.a.jrsd_instt_nm }}","type":"string"},{"id":"8d6fa575-7d4d-44d6-aaf8-9f967d478af6","name":"bsns_sumry_cn","value":"={{ $('markdown json parse to json').item.json.a.bsns_sumry_cn }}","type":"string"},{"id":"01a4c2d1-ab75-4e73-90a8-7bf79e5f8cd5","name":"trget_nm","value":"={{ $('markdown json parse to json').item.json.a.target_nm }}","type":"string"},{"id":"9507037a-7c15-4819-8357-0805d0904d7c","name":"reqst_begin_end_de","value":"={{ $('markdown json parse to json').item.json.a.reqst_begin_end_de }}","type":"string"},{"id":"47c24bf8-ce6b-40be-a8fd-93d8d1b03a19","name":"reqst_begin_dt","value":"={{ $('markdown json parse to json').item.json.a.reqst_begin_dt }}","type":"string"},{"id":"e3053a53-0200-4b96-88df-30b9bec65e62","name":"reqst_end_dt","value":"={{ $('markdown json parse to json').item.json.a.reqst_end_dt }}","type":"string"},{"id":"b78de255-6269-44b3-9097-50b993f40bfc","name":"refrnc_nm","value":"={{ $('markdown json parse to json').item.json.a.refrnc_nm }}","type":"string"},{"id":"b5e49522-9965-4e13-90b1-86edf56df9c2","name":"print_flpth_nm","value":"={{ $('settings').item.json.attach_file_donwload }}?atchFileId={{ $('print_flpth_nm extract').item.json.print_flpth_nm }}","type":"string"},{"id":"7e662533-f931-4a90-9dfb-f1386c206c8f","name":"print_file_nm","value":"={{ $('print_flpth_nm extract').item.json.print_file_nm }}","type":"string"},{"id":"607940df-de0c-4780-b040-d59037564076","name":"flpth_nm","value":"=","type":"string"},{"id":"1c9dd011-16d0-42d5-b17d-342b58975048","name":"file_nm","value":"=","type":"string"},{"id":"9f54d932-dd37-4175-b8cb-2d855891f65f","name":"subsidy_amount","value":"null","type":"object"},{"id":"8e2d8fb4-cebd-42c1-b12a-e673a77fc802","name":"self_contribution_rate","value":"null","type":"object"},{"id":"f12e819d-409d-436e-b658-684ba9ac8e30","name":"support_target","value":"null","type":"object"},{"id":"83e3ad1a-3ad2-4b72-a477-b123113b2e4a","name":"bonus_points_factors","value":"null","type":"object"},{"id":"d324fdce-53d0-453d-a211-7318d5935647","name":"total_budget","value":"null","type":"object"},{"id":"ad017264-5276-4798-91e5-7bf6f8a07b31","name":"subsidy_amount_type","value":"text","type":"string"},{"id":"0839db3e-060e-4a18-9831-915f28600652","name":"total_budget_type","value":"text","type":"string"},{"id":"75a37755-271f-4797-a2c7-cf650db294e8","name":"source","value":"={{ $('settings').item.json.source }}","type":"string"},{"id":"e9fe45e7-7eff-4e79-b8f8-91e76209dc2e","name":"reqst_mth_papers_cn","value":"={{ $('markdown json parse to json').item.json.a.reqst_mth_papers_cn }}","type":"string"},{"id":"5cff9144-b022-4c25-820e-86ab012b1321","name":"subsidy_amount","value":"={{ $('markdown json parse to json').item.json.a.subsidy_amount }}","type":"string"},{"id":"576eb6a4-e3a6-4c33-812c-e9cd0823b08c","name":"self_contribution_rate","value":"={{ $('markdown json parse to json').item.json.a.self_contribution_rate }}","type":"string"},{"id":"43c7d965-2238-45ca-9747-6a7d29a31896","name":"support_target","value":"={{ $('markdown json parse to json').item.json.a.target_nm }}","type":"string"},{"id":"5b6af3c3-cb7c-4c9e-bba9-a613a8ba3825","name":"bonus_points_factors","value":"={{ $('markdown json parse to json').item.json.a.bonus_points_factors }}","type":"string"},{"id":"3e892a8d-2f7a-4545-926c-16c4f7a624ab","name":"total_budget","value":"={{ $('markdown json parse to json').item.json.a.total_budget }}","type":"string"},{"id":"16575838-a2c6-459b-9593-77cebceffb55","name":"exc_instt_nm","value":"={{ $('markdown json parse to json').item.json.a.exc_instt_nm }}","type":"string"},{"id":"d41de8d0-9cc2-4a7b-a070-b178eef5a063","name":"creat_p_nttm","value":"={{ $now }}","type":"string"},{"id":"6985c4a8-ba48-4d92-aeeb-14ae0e9a5ef3","name":"created_ts","value":"={{ $now }}","type":"string"},{"id":"2bc59630-e41c-4f5a-a3b1-40ea84ef72a8","name":"pldir_sport_realm_lclas_code_nm","value":"ê¸°ìˆ ","type":"string"},{"id":"aff536ed-a418-4150-b586-d8f02a29010a","name":"is_classified","value":"N","type":"string"},{"id":"c8ddd444-4119-41a8-a219-3c99af755179","name":"del_yn","value":"N","type":"string"},{"id":"6e7c28e0-4e24-4003-8c36-3a4de0485fd5","name":"hide_yn","value":"N","type":"string"},{"id":"c9f7b77a-5ea0-416a-a74e-0699b17e88c5","name":"pblanc_url","value":"={{ $('is it after yesterday').item.json.link }}","type":"string"},{"id":"141bc6ac-3577-4887-a105-0b5e75c1bfcb","name":"main_category","value":"={{ $('markdown json parse to json').item.json.a.main_category }}","type":"string"},{"id":"1f794eef-05f3-4a7e-b40d-28d810706220","name":"sub_category","value":"={{ $('markdown json parse to json').item.json.a.sub_category }}","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[3584,64],"id":"68244283-dc9d-4c07-a889-fd1000e79dca","name":"ai result"},{"parameters":{"operation":"upsert","table":{"__rl":true,"value":"biz_info","mode":"list","cachedResultName":"biz_info"},"columnToMatchOn":"pblanc_nm","options":{"detailedOutput":true}},"type":"n8n-nodes-base.mySql","typeVersion":2.4,"position":[3744,64],"id":"dc9d4e28-2700-44ca-93ae-b00c7989336c","name":"MySQL","credentials":{"mySql":{"id":"HSXhV0YEF0PlSVWX","name":"MySQL account"}},"onError":"continueErrorOutput"},{"parameters":{"method":"POST","url":"={{ $('settings').item.json.attach_file_donwload }}","sendQuery":true,"queryParameters":{"parameters":[{"name":"=atchFileId","value":"={{ $json.print_flpth_nm }}"}]},"options":{"response":{"response":{"fullResponse":true,"responseFormat":"file"}}}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[1872,-176],"id":"19e5cd2d-c1d6-451d-a905-2764a2ac0e4b","name":"download hwp or pdf file"},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"7e7014ba-2d17-442a-a5f7-fa05200aade8","leftValue":"={{ $json.print_flpth_nm != null }}","rightValue":"null","operator":{"type":"boolean","operation":"true","singleValue":true}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[1648,-128],"id":"211e96fb-8dde-4b00-9395-d15233d3cbb6","name":"it has attach file?"},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"5c9a293c-b804-4cde-8646-67f1c5e459b3","leftValue":"={{$binary.data.fileName}}","rightValue":".hwp","operator":{"type":"string","operation":"endsWith"}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[2128,-176],"id":"67402e62-1054-42d6-8c20-ec879e511498","name":"it is hwp file?"},{"parameters":{"assignments":{"assignments":[{"id":"7fe9592c-31de-41ce-bdf1-b6fd7ca58090","name":"base_url","value":"https://www.smtech.go.kr","type":"string"},{"id":"6c938b6f-b5c3-45d6-925a-b60fa01b7b4c","name":"attach_file_donwload","value":"https://www.smtech.go.kr/front/comn/AtchFileDownload.do","type":"string"},{"id":"54f1cc9c-1bef-4198-98fd-d77ba404444b","name":"cityMap","value":"{   \"ì„œìš¸\": \"ì„œìš¸íŠ¹ë³„ì‹œ\",   \"ë¶€ì‚°\": \"ë¶€ì‚°ê´‘ì—­ì‹œ\",   \"ëŒ€êµ¬\": \"ëŒ€êµ¬ê´‘ì—­ì‹œ\",   \"ì¸ì²œ\": \"ì¸ì²œê´‘ì—­ì‹œ\",   \"ê´‘ì£¼\": \"ê´‘ì£¼ê´‘ì—­ì‹œ\",   \"ëŒ€ì „\": \"ëŒ€ì „ê´‘ì—­ì‹œ\",   \"ìš¸ì‚°\": \"ìš¸ì‚°ê´‘ì—­ì‹œ\",   \"ì„¸ì¢…\": \"ì„¸ì¢…íŠ¹ë³„ìì¹˜ì‹œ\",   \"ê²½ê¸°\": \"ê²½ê¸°ë„\",   \"ê°•ì›\": \"ê°•ì›ë„\",   \"ì¶©ë¶\": \"ì¶©ì²­ë¶ë„\",   \"ì¶©ë‚¨\": \"ì¶©ì²­ë‚¨ë„\",   \"ì „ë¶\": \"ì „ë¼ë¶ë„\",   \"ì „ë‚¨\": \"ì „ë¼ë‚¨ë„\",   \"ê²½ë¶\": \"ê²½ìƒë¶ë„\",   \"ê²½ë‚¨\": \"ê²½ìƒë‚¨ë„\",   \"ì œì£¼\": \"ì œì£¼íŠ¹ë³„ìì¹˜ë„\",   \"ì „ì§€ì—­\": \"ì „ì§€ì—­\" }","type":"object"},{"id":"c281e3b0-9ecc-4a1b-b057-ecd1796d81c3","name":"source","value":"ì¤‘ì†Œê¸°ì—…ê¸°ìˆ ì •ë³´ì§„í¥ì›","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[-544,-208],"id":"dd9d5ae3-179e-48b6-b4f2-e7a3810cfa49","name":"settings"},{"parameters":{"url":"https://www.smtech.go.kr/front/ifg/no/notice02_list.do","options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-320,-208],"id":"16264398-e872-48b3-8522-27958e846d08","name":"board list request"},{"parameters":{"operation":"extractHtmlContent","extractionValues":{"values":[{"key":"link","cssSelector":"table> tbody > tr > td > a.board","returnValue":"attribute","attribute":"href","returnArray":true},{"key":"b_name","cssSelector":"table> tbody > tr > td.ac:nth-child(2)","returnArray":true},{"key":"name","cssSelector":"table> tbody > tr > td > a.board","returnArray":true},{"key":"duration","cssSelector":"table> tbody > tr > td:nth-child(4)","returnArray":true},{"key":"notice_date","cssSelector":"table> tbody > tr > td:nth-child(5)","returnArray":true},{"key":"status","cssSelector":"table> tbody > tr > td:nth-child(6) > img","returnValue":"attribute","attribute":"alt","returnArray":true}]},"options":{}},"type":"n8n-nodes-base.html","typeVersion":1.2,"position":[-112,-208],"id":"de0ca230-c768-4cbe-b5bc-60071129a306","name":"extract board list"},{"parameters":{"jsCode":"const links = $input.first().json.link;\nconst names = $input.first().json.name;\nconst bNames = $input.first().json.b_name;\nconst durations = $input.first().json.duration;\nconst noticeDates = $input.first().json.notice_date;\nconst statusList = $input.first().json.status\nreturn statusList\n  .filter((item) => item == \"ì ‘ìˆ˜ì¤‘\" || item == \"ì ‘ìˆ˜ì˜ˆì •\")\n  .map((status, i) => {\n  return {link: $('settings').first().json.base_url + links[i], name: names[i], bName: bNames[i], duration: durations[i], noticeDate: noticeDates[i],\n         status: status}\n})"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[128,-208],"id":"80f511f5-a795-48b6-be98-b0fef8ac8328","name":"retrieve with status ì ‘ìˆ˜ì¤‘ or ì ‘ìˆ˜ì˜ˆì •"},{"parameters":{"options":{"reset":"={{ $node[\"batch\"].context[\"done\"] }}"}},"type":"n8n-nodes-base.splitInBatches","typeVersion":3,"position":[368,-208],"id":"62bd8a8a-d957-4eeb-9ae8-5a8f6b11ecdd","name":"batch"},{"parameters":{"url":"={{ $('is it after yesterday').item.json.link }}","options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[1072,-128],"id":"87284516-483b-4a2e-beb4-b0e2db32589d","name":"board detail request"},{"parameters":{"operation":"extractHtmlContent","extractionValues":{"values":[{"key":"title","cssSelector":"table.tbl_base > tbody > tr:nth-child(2) > td"},{"key":"b_title","cssSelector":"table.tbl_base > tbody > tr:nth-child(1) > td"},{"key":"jrsd_instt_nm","cssSelector":"table.tbl_base > tbody > tr:nth-child(3) > td"},{"key":"reqst_begin_dt","cssSelector":"table.tbl_base > tbody > tr:nth-child(4) > td:nth-child(2)"},{"key":"reqst_end_dt","cssSelector":"table.tbl_base > tbody > tr:nth-child(4) > td:nth-child(4)"},{"key":"print_flpth_nm","cssSelector":"table.tbl_base > tbody > tr:nth-child(5) > td > p > a","returnValue":"attribute","attribute":"href"},{"key":"print_file_nm","cssSelector":"table.tbl_base > tbody > tr:nth-child(5) > td > p > a"}]},"options":{"cleanUpText":true}},"type":"n8n-nodes-base.html","typeVersion":1.2,"position":[1248,-128],"id":"195ae71e-2336-4f7e-8278-9a7af1cfbcf8","name":"extract board detail items"},{"parameters":{"jsCode":"const str = $input.first().json.print_flpth_nm;\nvar match = null;\nif(str){\n  match = str.match(/\\((.*)\\)/);\n}\n\nif (match) {\n  const inside = match[1];\n  $input.first().json.print_flpth_nm = inside.split(',')[0].replaceAll(\"'\", \"\");\n}\n\nreturn $input.all();"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[1440,-128],"id":"574fbf31-3799-4b5a-973a-61c6cf086273","name":"print_flpth_nm extract"},{"parameters":{"jsCode":"function extractJsonFromString(str) {\n  const jsonMatch = str.match(/```json\\s*([\\s\\S]*?)\\s*```/);\n  if (jsonMatch && jsonMatch[1]) {\n    try {\n      const obj = JSON.parse(jsonMatch[1]);\n\n      // pblanc_nm í•„ë“œê°€ ìˆìœ¼ë©´ ê´„í˜¸ ì œê±°\n      if (obj && obj.a && obj.a.pblanc_nm) {\n        obj.a.pblanc_nm = obj.a.pblanc_nm.replace(/[\\(\\[][^()\\[\\]]+[\\)\\]]/g, '').trim();\n      }\n\n      return obj;\n    } catch (e) {\n      console.error(\"JSON íŒŒì‹± ì—ëŸ¬:\", e);\n    }\n  }\n  return null;\n}\n\nreturn { a: extractJsonFromString($input.first().json.choices[0].message.content) }\n"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[3088,64],"id":"2bd4162b-15c9-4450-9a11-e887d0fe086f","name":"markdown json parse to json"},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"55c92ba5-6f07-4451-938b-42c624dcdcd0","leftValue":"={{ $json.noticeDate }}","rightValue":"={{ $today.minus(1, 'days') }}","operator":{"type":"dateTime","operation":"afterOrEquals"}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[592,-96],"id":"582e86db-2b71-4387-abe0-9e02d6e4761e","name":"is it after yesterday"},{"parameters":{"jsCode":"// íŒŒì¼ëª… ì¶”ì¶œ í•¨ìˆ˜ëŠ” ìœ ì§€í•˜ë˜ ì‚¬ìš© ì•ˆ í•¨\nfunction getFileName(disposition) {\n    const utf8FilenameRegex = /filename\\*=UTF-8''([\\w%\\-\\.]+)(?:; ?|$)/i;\n    const asciiFilenameRegex = /^filename=([\"']?)(.*?[^\\\\])\\1(?:; ?|$)/i;\n\n    let fileName = null;\n    if (utf8FilenameRegex.test(disposition)) {\n        fileName = decodeURIComponent(utf8FilenameRegex.exec(disposition)[1]);\n    } else {\n        const filenameStart = disposition.toLowerCase().indexOf('filename=');\n        if (filenameStart >= 0) {\n            const partialDisposition = disposition.slice(filenameStart);\n            const matches = asciiFilenameRegex.exec(partialDisposition);\n            if (matches != null && matches[2]) {\n                fileName = matches[2];\n            }\n        }\n    }\n    return fileName;\n}\n\n// ğŸ‘‰ íŒŒì¼ëª… ë¬´ì¡°ê±´ test.hwpë¡œ ì„¤ì •\n$input.item.binary.data.fileName = $('print_flpth_nm extract').first().json.print_file_nm;\n\nreturn $input.item;\n"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[2000,-176],"id":"b188a8e5-a6a2-46ea-9a1a-1498eb5a7927","name":"Code"},{"parameters":{"operation":"select","table":{"__rl":true,"value":"biz_info","mode":"list","cachedResultName":"biz_info"},"where":{"values":[{"column":"pblanc_nm","condition":"LIKE","value":"={{ $json.a.pblanc_nm }}"}]},"options":{}},"type":"n8n-nodes-base.mySql","typeVersion":2.4,"position":[3232,-96],"id":"5ff4bc7b-3d08-4efe-99d4-2177767b7a6d","name":"MySQL1","alwaysOutputData":true,"credentials":{"mySql":{"id":"HSXhV0YEF0PlSVWX","name":"MySQL account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"2d3aee72-46af-4378-99b4-a974ed6c6c5c","leftValue":"={{ $json.a.jrsd_instt_nm }}","rightValue":"","operator":{"type":"string","operation":"empty","singleValue":true}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[3424,64],"id":"4a3043b3-4c29-4849-8787-0f2893b255fa","name":"If1"},{"parameters":{"content":"ì£¼ì†Œ\n\nhttps://www.smtech.go.kr/front/ifg/no/notice02_list.do","height":80,"width":440},"type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[-768,-320],"id":"826a55e6-6832-490d-92bb-8efae0a733a4","name":"Sticky Note"},{"parameters":{"jsCode":"let title = $input.first().json.name || '';\n\n// ê´„í˜¸ ë˜ëŠ” ëŒ€ê´„í˜¸ ì•ˆì˜ ë‚´ìš© ì œê±°\ntitle = title.replace(/[\\(\\[][^()\\[\\]]+[\\)\\]]/g, '').trim();\n\nreturn [\n  {\n    json: {\n      title\n    }\n  }\n];\n\n\n"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[688,-320],"id":"cea67d67-044e-4197-b76e-9354a68a0a59","name":"ì¤‘ë³µ ìë£Œ ì¡°íšŒ"},{"parameters":{"operation":"select","table":{"__rl":true,"value":"biz_info","mode":"list","cachedResultName":"biz_info"},"where":{"values":[{"column":"pblanc_nm","condition":"LIKE","value":"={{ $json.title }}"}]},"options":{}},"type":"n8n-nodes-base.mySql","typeVersion":2.4,"position":[832,-320],"id":"57a4fdb4-d2a2-41dd-ac0f-21bc15cc6f2a","name":"ì¤‘ë³µì¡°íšŒ MYSQL","alwaysOutputData":true,"credentials":{"mySql":{"id":"HSXhV0YEF0PlSVWX","name":"MySQL account"}},"onError":"continueErrorOutput"},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"2d3aee72-46af-4378-99b4-a974ed6c6c5c","leftValue":"={{ $json.pblanc_nm }}","rightValue":"","operator":{"type":"string","operation":"empty","singleValue":true}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[960,-320],"id":"4063fab2-d2db-4861-90a0-5e81f0e00dff","name":"ì¤‘ë³µì¡°íšŒ IF"},{"parameters":{"rule":{"interval":[{"triggerAtHour":11,"triggerAtMinute":50}]}},"type":"n8n-nodes-base.scheduleTrigger","typeVersion":1.2,"position":[-688,-16],"id":"5a1f4665-ef3a-47bc-a298-f042d94ca42a","name":"Schedule Trigger"},{"parameters":{"table":{"__rl":true,"value":"n8n_crawl_summary","mode":"list","cachedResultName":"n8n_crawl_summary"},"dataMode":"defineBelow","valuesToSend":{"values":[{"column":"workflow_name","value":"={{ $workflow.name }}"},{"column":"total_count","value":"={{ $json.notice_date.length }}"},{"column":"type","value":"total_count"}]},"options":{}},"type":"n8n-nodes-base.mySql","typeVersion":2.5,"position":[384,320],"id":"9cd474bf-4a20-40f2-83f9-570dc85315d0","name":"ê³µê³ ìƒíƒœì „ì²´ê°œìˆ˜ì €ì¥","credentials":{"mySql":{"id":"s7XNBHZtTOH7C66M","name":"MySQL account 2"}}},{"parameters":{"jsCode":"// Function ë…¸ë“œ ì•ˆ\nreturn [\n  {\n    json: {\n      workflowName: $workflow.name,\n      insertId:$input.first().json.data.insertId\n    }\n  }\n];\n"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[3904,-112],"id":"b064bad4-5714-4889-87ee-6e71016a4c9a","name":"ê³µê³ ìƒíƒœì •ë¦¬"},{"parameters":{"table":{"__rl":true,"value":"n8n_crawl_summary","mode":"list","cachedResultName":"n8n_crawl_summary"},"dataMode":"defineBelow","valuesToSend":{"values":[{"column":"workflow_name","value":"={{ $workflow.name }}"},{"column":"insertId","value":"={{ $json.insertId }}"},{"column":"type","value":"detail"}]},"options":{}},"type":"n8n-nodes-base.mySql","typeVersion":2.5,"position":[4112,-112],"id":"8bdb169b-8bf8-4c68-b15c-66922cf6d862","name":"ê³µê³ ìƒíƒœìƒì„¸ì €ì¥","credentials":{"mySql":{"id":"s7XNBHZtTOH7C66M","name":"MySQL account 2"}}}],"connections":{"Retrieve img3":{"main":[[{"node":"do documnet qna","type":"main","index":0}]]},"Upload a img1":{"main":[[{"node":"Retrieve img1","type":"main","index":0}]]},"Retrieve img1":{"main":[[{"node":"Retrieve img3","type":"main","index":0}]]},"Convert Hwp to pdf":{"main":[[{"node":"Upload a img1","type":"main","index":0}]]},"do documnet qna":{"main":[[{"node":"markdown json parse to json","type":"main","index":0}]]},"ai result":{"main":[[{"node":"MySQL","type":"main","index":0}]]},"MySQL":{"main":[[{"node":"batch","type":"main","index":0},{"node":"ê³µê³ ìƒíƒœì •ë¦¬","type":"main","index":0}],[{"node":"batch","type":"main","index":0}]]},"download hwp or pdf file":{"main":[[{"node":"Code","type":"main","index":0}]]},"it has attach file?":{"main":[[{"node":"download hwp or pdf file","type":"main","index":0}],[{"node":"batch","type":"main","index":0}]]},"it is hwp file?":{"main":[[{"node":"Convert Hwp to pdf","type":"main","index":0}],[{"node":"Upload a img1","type":"main","index":0}]]},"settings":{"main":[[{"node":"board list request","type":"main","index":0}]]},"board list request":{"main":[[{"node":"extract board list","type":"main","index":0}]]},"extract board list":{"main":[[{"node":"retrieve with status ì ‘ìˆ˜ì¤‘ or ì ‘ìˆ˜ì˜ˆì •","type":"main","index":0},{"node":"ê³µê³ ìƒíƒœì „ì²´ê°œìˆ˜ì €ì¥","type":"main","index":0}]]},"retrieve with status ì ‘ìˆ˜ì¤‘ or ì ‘ìˆ˜ì˜ˆì •":{"main":[[{"node":"batch","type":"main","index":0}]]},"batch":{"main":[[],[{"node":"is it after yesterday","type":"main","index":0}]]},"board detail request":{"main":[[{"node":"extract board detail items","type":"main","index":0}]]},"extract board detail items":{"main":[[{"node":"print_flpth_nm extract","type":"main","index":0}]]},"print_flpth_nm extract":{"main":[[{"node":"it has attach file?","type":"main","index":0}]]},"markdown json parse to json":{"main":[[{"node":"MySQL1","type":"main","index":0},{"node":"If1","type":"main","index":0}]]},"is it after yesterday":{"main":[[{"node":"ì¤‘ë³µ ìë£Œ ì¡°íšŒ","type":"main","index":0}]]},"Code":{"main":[[{"node":"it is hwp file?","type":"main","index":0}]]},"MySQL1":{"main":[[{"node":"If1","type":"main","index":0}]]},"If1":{"main":[[{"node":"ai result","type":"main","index":0}]]},"ì¤‘ë³µ ìë£Œ ì¡°íšŒ":{"main":[[{"node":"ì¤‘ë³µì¡°íšŒ MYSQL","type":"main","index":0}]]},"ì¤‘ë³µì¡°íšŒ MYSQL":{"main":[[{"node":"ì¤‘ë³µì¡°íšŒ IF","type":"main","index":0}]]},"ì¤‘ë³µì¡°íšŒ IF":{"main":[[{"node":"board detail request","type":"main","index":0}],[{"node":"batch","type":"main","index":0}]]},"Schedule Trigger":{"main":[[{"node":"settings","type":"main","index":0}]]},"ê³µê³ ìƒíƒœì •ë¦¬":{"main":[[{"node":"ê³µê³ ìƒíƒœìƒì„¸ì €ì¥","type":"main","index":0}]]}},"authors":"system migration","name":null,"description":null,"autosaved":false},"tags":[]}