{"createdAt":"2025-06-18T00:08:55.755Z","updatedAt":"2025-09-18T06:07:30.952Z","id":"NjJ9lFQPQIhxfm8U","name":"03.환경산업기술원","active":true,"isArchived":false,"nodes":[{"parameters":{"method":"POST","url":"https://www.keiti.re.kr/site/keiti/ex/board/List.do?cbIdx=277","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Content-Type","value":"application/x-www-form-urlencoded"}]},"sendBody":true,"bodyParameters":{"parameters":[{"name":"pageIndex","value":"={{ $json.i }}"},{"name":"searchExt1","value":"24000100"},{"name":"searchCondition","value":"titlecontents"},{"name":"searchKeyword"}]},"options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[624,-16],"id":"b7bdb041-a13a-4704-b5c6-29a1d2512e0f","name":"HTTP Request"},{"parameters":{"assignments":{"assignments":[{"id":"a15332f6-2600-4b6d-ad12-d010c81e8441","name":"base_url","value":"https://www.keiti.re.kr","type":"string"},{"id":"253fd306-16dd-4ea7-ad77-b59dea17823e","name":"add-item-count","value":0,"type":"number"},{"id":"a68ee54e-58d8-4250-882a-fff6a76840d6","name":"site","value":"한국환경산업기술원","type":"string"},{"id":"15a53939-3532-414a-87bc-7d1cd31eedaa","name":"cityMap","value":"{   \"서울\": \"서울특별시\",   \"부산\": \"부산광역시\",   \"대구\": \"대구광역시\",   \"인천\": \"인천광역시\",   \"광주\": \"광주광역시\",   \"대전\": \"대전광역시\",   \"울산\": \"울산광역시\",   \"세종\": \"세종특별자치시\",   \"경기\": \"경기도\",   \"강원\": \"강원도\",   \"충북\": \"충청북도\",   \"충남\": \"충청남도\",   \"전북\": \"전라북도\",   \"전남\": \"전라남도\",   \"경북\": \"경상북도\",   \"경남\": \"경상남도\",   \"제주\": \"제주특별자치도\",   \"전지역\": \"전지역\" }","type":"object"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[-1136,-16],"id":"e30440c5-e129-408d-97c1-bda3377f5698","name":"settings"},{"parameters":{"operation":"extractHtmlContent","extractionValues":{"values":[{"key":"link","cssSelector":".thumb > .list > li > div > a","returnValue":"attribute","attribute":"href","returnArray":true}]},"options":{}},"type":"n8n-nodes-base.html","typeVersion":1.2,"position":[832,-16],"id":"a5c309f4-a611-4bab-abbb-062cc4b5da7f","name":"extract board lists"},{"parameters":{"options":{"reset":"={{ $node[\"batch\"].context[\"done\"] }}"}},"type":"n8n-nodes-base.splitInBatches","typeVersion":3,"position":[1184,-16],"id":"1700e5a4-a43b-47fd-82fb-cf06c3e7848a","name":"batch"},{"parameters":{"url":"=https://www.keiti.re.kr{{ $json.link }}","options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[1392,-16],"id":"0402b421-5b7f-4c2e-b965-ccf17fac56ec","name":"HTTP Request1"},{"parameters":{"jsCode":"return $input.first().json.link.map((item) => {\n  return {link: item, task_id: $('clickUp created task variables').first().json.id}\n})"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[1008,-16],"id":"3201e439-4852-4cef-9b6f-0a3eefdf074d","name":"retrieve"},{"parameters":{"operation":"extractHtmlContent","extractionValues":{"values":[{"key":"title","cssSelector":"div.bbs > dl.view > dt"},{"key":"attachment","cssSelector":"div.bbs > dl.view > dd > div.info > div.w100p > a","returnValue":"attribute","attribute":"href"},{"key":"board_date","cssSelector":"div.bbs > dl.view > dd > div.info > div:nth-child(2)","skipSelectors":"b"},{"key":"content","cssSelector":"div.bbs > dl.view > dd > div.content "},{"key":"attachment_name","cssSelector":"div.bbs > dl.view > dd > div.info > div.w100p > a"},{"key":"flpth_nm","cssSelector":"div.bbs > dl.view > dd > div.info > div.w100p > a:not(:first-of-type)","returnValue":"attribute","attribute":"href","returnArray":true},{"key":"file_nm","cssSelector":"div.bbs > dl.view > dd > div.info > div.w100p > a:not(:first-of-type)","returnArray":true}]},"options":{}},"type":"n8n-nodes-base.html","typeVersion":1.2,"position":[1520,-16],"id":"d0198967-7e3d-40a2-b125-9ada1048d4c5","name":"extract board detail items"},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"9399805e-9b7f-44a9-acd2-c0c2ab440f6b","leftValue":"={{ $('extract board detail items').item.json.attachment_name != \"\" &&  $('extract board detail items').item.json.attachment_name != null}}","rightValue":"","operator":{"type":"boolean","operation":"true","singleValue":true}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[2304,-64],"id":"ba4912b7-310e-4d53-a3d4-8170617eba8b","name":"has attachment?"},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"0647d730-82db-4e14-afbb-adeee6932d28","leftValue":"={{ $json.attachment_name }}","rightValue":".hwp","operator":{"type":"string","operation":"endsWith"}},{"id":"22db94f8-6db6-4c3a-b5e6-cb8c3a36b724","leftValue":"={{ $json.attachment_name }}","rightValue":".hwpx","operator":{"type":"string","operation":"endsWith"}}],"combinator":"or"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[2720,-288],"id":"127a40c8-efb2-4129-aeaf-7dbd0134dad1","name":"is it hwp"},{"parameters":{"method":"POST","url":"http://192.168.10.133:8000/convert","sendBody":true,"contentType":"multipart-form-data","bodyParameters":{"parameters":[{"parameterType":"formBinaryData","name":"file","inputDataFieldName":"data"}]},"options":{"redirect":{"redirect":{}}}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[3264,-624],"id":"793c5b6b-2aa0-48e2-bb1c-6b5486dda670","name":"Convert Hwp to pdf","retryOnFail":true,"maxTries":2,"onError":"continueErrorOutput"},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"2905c03b-0b51-46e9-a77f-41b05ad475c0","leftValue":"={{ $json.attachment_name }}","rightValue":"신청서","operator":{"type":"string","operation":"notContains"}}],"combinator":"or"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[2464,-64],"id":"682b31ce-9c3a-49e0-8590-74c7e520cba7","name":"it doesn't contain \"신청서\""},{"parameters":{"url":"={{ $('settings').item.json.base_url }}{{ $json.attachment }}","options":{"response":{"response":{"responseFormat":"file"}}}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[2864,-624],"id":"558403a2-b909-4160-8734-9e5ebc1a704d","name":"request attachment file"},{"parameters":{"assignments":{"assignments":[{"id":"dca754ac-4479-4295-ab21-47d895f62cae","name":"pblanc_nm","value":"={{ $json.a.pblanc_nm }}","type":"string"},{"id":"0f927bf2-d7a7-4973-aac7-2717bed23371","name":"jrsd_instt_nm","value":"={{ $json.a.jrsd_instt_nm }}","type":"string"},{"id":"8d6fa575-7d4d-44d6-aaf8-9f967d478af6","name":"bsns_sumry_cn","value":"={{ $json.a.bsns_sumry_cn }}","type":"string"},{"id":"01a4c2d1-ab75-4e73-90a8-7bf79e5f8cd5","name":"trget_nm","value":"={{ $json.a.target_nm }}","type":"string"},{"id":"9507037a-7c15-4819-8357-0805d0904d7c","name":"reqst_begin_end_de","value":"={{ $json.a.reqst_begin_end_de }}","type":"string"},{"id":"47c24bf8-ce6b-40be-a8fd-93d8d1b03a19","name":"reqst_begin_dt","value":"={{ $json.a.reqst_begin_dt }}","type":"string"},{"id":"e3053a53-0200-4b96-88df-30b9bec65e62","name":"reqst_end_dt","value":"={{ $json.a.reqst_end_dt }}","type":"string"},{"id":"b78de255-6269-44b3-9097-50b993f40bfc","name":"refrnc_nm","value":"={{ $json.a.refrnc_nm }}","type":"string"},{"id":"b5e49522-9965-4e13-90b1-86edf56df9c2","name":"print_flpth_nm","value":"={{ $('settings').item.json.base_url }}{{ $('extract board detail items').item.json.attachment }}","type":"string"},{"id":"7e662533-f931-4a90-9dfb-f1386c206c8f","name":"print_file_nm","value":"={{ $('extract board detail items').item.json.attachment_name }}","type":"string"},{"id":"607940df-de0c-4780-b040-d59037564076","name":"flpth_nm","value":"={{ $('extract board detail items').item.json.flpth_nm.map(item => $('settings').item.json.base_url + item).join('@')}}","type":"string"},{"id":"1c9dd011-16d0-42d5-b17d-342b58975048","name":"file_nm","value":"={{ $('extract board detail items').item.json.file_nm.join('@') }}","type":"string"},{"id":"9f54d932-dd37-4175-b8cb-2d855891f65f","name":"subsidy_amount","value":"null","type":"object"},{"id":"8e2d8fb4-cebd-42c1-b12a-e673a77fc802","name":"self_contribution_rate","value":"null","type":"object"},{"id":"f12e819d-409d-436e-b658-684ba9ac8e30","name":"support_target","value":"null","type":"object"},{"id":"83e3ad1a-3ad2-4b72-a477-b123113b2e4a","name":"bonus_points_factors","value":"null","type":"object"},{"id":"d324fdce-53d0-453d-a211-7318d5935647","name":"total_budget","value":"null","type":"object"},{"id":"ad017264-5276-4798-91e5-7bf6f8a07b31","name":"subsidy_amount_type","value":"text","type":"string"},{"id":"0839db3e-060e-4a18-9831-915f28600652","name":"total_budget_type","value":"text","type":"string"},{"id":"75a37755-271f-4797-a2c7-cf650db294e8","name":"source","value":"한국환경산업기술원","type":"string"},{"id":"e9fe45e7-7eff-4e79-b8f8-91e76209dc2e","name":"reqst_mth_papers_cn","value":"={{ $json.a.reqst_mth_papers_cn }}","type":"string"},{"id":"5cff9144-b022-4c25-820e-86ab012b1321","name":"subsidy_amount","value":"={{ $json.a.subsidy_amount }}","type":"string"},{"id":"576eb6a4-e3a6-4c33-812c-e9cd0823b08c","name":"self_contribution_rate","value":"={{ $json.a.self_contribution_rate }}","type":"string"},{"id":"43c7d965-2238-45ca-9747-6a7d29a31896","name":"support_target","value":"={{ $json.a.target_nm }}","type":"string"},{"id":"5b6af3c3-cb7c-4c9e-bba9-a613a8ba3825","name":"bonus_points_factors","value":"={{ $json.a.bonus_points_factors==null ? null :  $json.a.bonus_points_factors.toJsonString() }}","type":"string"},{"id":"3e892a8d-2f7a-4545-926c-16c4f7a624ab","name":"total_budget","value":"={{ $json.a.total_budget }}","type":"string"},{"id":"16575838-a2c6-459b-9593-77cebceffb55","name":"exc_instt_nm","value":"={{ $json.a.exc_instt_nm }}","type":"string"},{"id":"8b13bb3a-8862-4c26-9211-b1d48b8eaec2","name":"creat_p_nttm","value":"={{ $now }}","type":"string"},{"id":"a642f087-92c1-4360-9f23-8a3f3b6b6923","name":"created_ts","value":"={{ $now }}","type":"string"},{"id":"a5c8f7d9-beec-4515-ab94-7abc53bbadd4","name":"pldir_sport_realm_lclas_code_nm","value":"기술","type":"string"},{"id":"aff536ed-a418-4150-b586-d8f02a29010a","name":"is_classified","value":"H","type":"string"},{"id":"9a706910-664c-4db3-90a4-3fd551bc6216","name":"del_yn","value":"N","type":"string"},{"id":"b0eec9c4-edc4-4de9-acc3-263d761f386c","name":"hide_yn","value":"N","type":"string"},{"id":"287b6753-a1e6-4f3a-ad5c-1e71a12f0cdc","name":"pblanc_url","value":"=https://www.keiti.re.kr{{ $('retrieve').first().json.link }}","type":"string"},{"id":"96b4955b-277a-442a-aba2-2302913c97b4","name":"main_category","value":"={{ $json.a.main_category }}","type":"string"},{"id":"38ec0149-72c8-4a47-81c6-be54184bf8d8","name":"sub_category","value":"={{ $json.a.sub_category }}","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[4800,-320],"id":"3c558dce-f911-4274-ba76-da183142198d","name":"ai result"},{"parameters":{"promptType":"define","text":"={{ $json.message }}","hasOutputParser":true,"batching":{}},"type":"@n8n/n8n-nodes-langchain.chainLlm","typeVersion":1.7,"position":[2944,160],"id":"90ef586f-523e-4ce5-8be4-2e0a0ce4ee3d","name":"Basic LLM Chain1","onError":"continueErrorOutput"},{"parameters":{"modelName":"models/gemini-1.5-flash-8b-latest","options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatGoogleGemini","typeVersion":1,"position":[2784,448],"id":"1994655c-3271-41bd-9fb2-57413f869e81","name":"Google Gemini Chat Model2","credentials":{"googlePalmApi":{"id":"XWAzclOTFyK0A6fs","name":"Google Gemini(PaLM) Api account"}}},{"parameters":{"schemaType":"manual","inputSchema":"{\n  \"$schema\": \"https://json-schema.org/draft/2020-12/schema\",\n  \"$id\": \"https://example.com/product.schema.json\",\n  \"title\": \"anouncement\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"pblanc_nm\": {\n      \"type\": \"string\",\n      \"description\": \"공고제목\"\n    },\n    \"jrsd_instt_nm\": {\n      \"type\": [\"string\", \"null\"],\n      \"description\": \"대상지역\"\n    },\n    \"bsns_sumry_cn\": {\n      \"type\": [\"string\", \"null\"],\n      \"description\": \"공고요약\"\n    },\n    \"target_nm\": {\n      \"type\": [\"string\", \"null\"],\n      \"description\": \"대상기업\"\n    },\n    \"reqst_begin_end_de\": {\n      \"type\": [\"string\", \"null\"],\n      \"description\": \"공고전체기간\"\n    },\n    \"reqst_begin_dt\": {\n      \"type\": [\"string\", \"null\"],\n      \"description\": \"공고시작\"\n    },\n    \"reqst_end_dt\": {\n      \"type\": [\"string\", \"null\"],\n      \"description\": \"공고종료\"\n    },\n    \"reqst_mth_papers_cn\": {\n      \"type\": [\"string\", \"null\"],\n      \"description\": \"사업신청 방법\"\n    },\n    \"refrnc_nm\": {\n      \"type\": [\"string\", \"null\"],\n      \"description\": \"문의처내용\"\n    },\n    \"subsidy_amount\": {\n      \"type\": [\"string\", \"null\"],\n      \"description\": \"지원금액\"\n    },\n    \"bonus_points_factors\": {\n      \"type\": [\"string\", \"null\"],\n      \"description\": \"가점요소\"\n    },\n    \"total_budget\": {\n      \"type\": [\"string\", \"null\"],\n      \"description\": \"예산\"\n    },\n    \"self_contribution_rate\": {\n      \"type\": [\"string\", \"null\"],\n      \"description\": \"자부담률\"\n    },\n    \"main_category\": {\n      \"type\": [\"string\", \"null\"],\n      \"description\": \"대분류\"\n    },\n    \"sub_category\": {\n      \"type\": [\"string\", \"null\"],\n      \"description\": \"설비분류\"\n    }\n  },\n  \"required\": [\"pblanc_nm\"]\n}\n"},"type":"@n8n/n8n-nodes-langchain.outputParserStructured","typeVersion":1.2,"position":[2960,448],"id":"b7f34e18-8aca-4e09-8563-59affa3e4243","name":"Structured Output Parser2","notesInFlow":false},{"parameters":{"jsCode":"const content = $input.first().json.content\nreturn {\n  message: `${content}  \n\n위에서 F에서 pblanc_nm(공고제목), jrsd_instt_nm(대상 지역), 주최기관(exc_instt_nm), bsns_sumry_cn(공고요약), target_nm(대상기업), reqst_begin_end_de(공고 전체기간 형식은 ***'YYYYMMDD ~ YYYYMMDD'***), reqst_begin_dt(공고시작기간 YYYY-MM-DD), reqst_end_dt(공고마감기간 YYYY-MM-DD), reqst_mth_papers_cn(사업신청방법), refrnc_nm(문의처), 지원금액(subsidy_amount), 가점요소(bonus_points_factors), 예산(total_budget), 자부담률(self_contribution_rate) 에 대한 정보를 알려줘.  \n만약 자료가 없다면 null으로라도 알려줘. 응답은 json형태야.  \n\n또한 지역명(jrsd_instt_nm)이 {{ $('settings').item.json.cityMap.values() }} 중 하나로 출력되게 해주고, 만약 없다면 null로 출력해줘.  \n그리고 reqst_begin_end_de(공고 전체기간)의 형식은 반드시 YYYYMMDD ~ YYYYMMDD 형태로 해줘.  \n대상기업(target_nm)은 중소기업,대기업 중 골라서 해주고 둘 다 지원한다면 '중소기업,대기업'으로 출력해줘. 알 수 없으면 null이야.\n\nmain_category: 공고의 주요 분류를 다음 항목 중에서 정확하게 추출해줘.  \n해당되는 항목이 여러 개인 경우 콤마(,)로 구분해서 출력해줘.  \n아래 항목 중 적절한 키워드가 공고 내용에 존재할 경우, 가장 가까운 항목으로 판단해서 선택해줘.  \n단, 명확한 키워드가 없거나 분류하기 애매한 경우에는 빈 문자열(\"\")로 표시해줘.  \n\n[선택 가능한 항목 목록]  \n컨설팅, 스마트생태공장, 에너지효율화, FEMS/MES, 온실가스저감, 기타설비지원  \n\n출력 예시:  \n\"컨설팅,스마트생태공장\"\n\n---\n\nsub_category: 공고 내용 중 다음 설비 목록에서 언급된 항목만 골라 콤마(,)로 구분하여 출력해줘.  \n유사 표현이 있을 경우 판단해서 포함해도 되지만, 아래 목록에 없는 항목은 절대 추가하지 마세요.  \n어떤 설비도 언급되지 않았을 경우에는 빈 문자열(\"\")로 출력해줘.  \n\n[설비 목록]  \n변압기, 폐유재활용설비, 송풍기, 신재생발전설비, 집진기, 펌프, 콤프레셔, 공기조화기, 열회수환기장치, 보일러, 열교환기, 배출가스처리기, 공기정화기, 탈황기, 탈질기, 오수처리기, 폐수처리기, 냉각탑, 에너지관리시스템, 공정제어시스템, 자동화시스템, 냉동기, 증기재압축장치, 폐열회수시스템, 유수분리기, 압축기, 인버터, 용해로, 응축수회수기, 악취저감설비, 사출성형기  \n\n출력 예시:  \n\"인버터,용해로\"\n\n주의사항:  \n- 설비 이름은 반드시 위 목록에서만 선택해야 하며, 새로운 항목을 생성하거나 임의로 추가하지 말 것  \n- 관련성이 낮거나 판단이 어려울 경우에도 빈 문자열(\"\")로 처리할 것  \n- 출력은 항상 문자열이며, null이 아닌 빈 문자열(\"\")로 표시`\n};"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[2720,160],"id":"0c556505-e9f4-445c-9b78-a84ae1bb57dd","name":"Code"},{"parameters":{"assignments":{"assignments":[{"id":"dca754ac-4479-4295-ab21-47d895f62cae","name":"pblanc_nm","value":"={{ $('extract board detail items').item.json.title }}","type":"string"},{"id":"0f927bf2-d7a7-4973-aac7-2717bed23371","name":"jrsd_instt_nm","value":"={{ $('Code3').item.json.output.jrsd_instt_nm }}","type":"string"},{"id":"8d6fa575-7d4d-44d6-aaf8-9f967d478af6","name":"bsns_sumry_cn","value":"={{ $('Code3').item.json.output.bsns_sumry_cn }}","type":"string"},{"id":"01a4c2d1-ab75-4e73-90a8-7bf79e5f8cd5","name":"trget_nm","value":"={{ $('Code3').item.json.output.target_nm }}","type":"string"},{"id":"9507037a-7c15-4819-8357-0805d0904d7c","name":"reqst_begin_end_de","value":"={{ $('Code3').item.json.output.reqst_begin_end_de }}","type":"string"},{"id":"47c24bf8-ce6b-40be-a8fd-93d8d1b03a19","name":"reqst_begin_dt","value":"={{ $('Code3').item.json.output.reqst_begin_dt }}","type":"string"},{"id":"e3053a53-0200-4b96-88df-30b9bec65e62","name":"reqst_end_dt","value":"={{ $('Code3').item.json.output.reqst_end_dt }}","type":"string"},{"id":"b78de255-6269-44b3-9097-50b993f40bfc","name":"refrnc_nm","value":"={{ $('Code3').item.json.output.refrnc_nm }}","type":"string"},{"id":"b5e49522-9965-4e13-90b1-86edf56df9c2","name":"print_flpth_nm","value":"={{ $('settings').item.json.base_url }}{{ $('extract board detail items').item.json.attachment }}","type":"string"},{"id":"7e662533-f931-4a90-9dfb-f1386c206c8f","name":"print_file_nm","value":"={{ $('extract board detail items').item.json.attachment_name }}","type":"string"},{"id":"607940df-de0c-4780-b040-d59037564076","name":"flpth_nm","value":"={{ $('extract board detail items').item.json.flpth_nm.map(item => $('settings').item.json.base_url + item).join('@')}}","type":"string"},{"id":"1c9dd011-16d0-42d5-b17d-342b58975048","name":"file_nm","value":"={{ $('extract board detail items').item.json.file_nm.join('@') }}","type":"string"},{"id":"9f54d932-dd37-4175-b8cb-2d855891f65f","name":"subsidy_amount","value":"null","type":"object"},{"id":"8e2d8fb4-cebd-42c1-b12a-e673a77fc802","name":"self_contribution_rate","value":"null","type":"object"},{"id":"f12e819d-409d-436e-b658-684ba9ac8e30","name":"support_target","value":"null","type":"object"},{"id":"83e3ad1a-3ad2-4b72-a477-b123113b2e4a","name":"bonus_points_factors","value":"null","type":"object"},{"id":"d324fdce-53d0-453d-a211-7318d5935647","name":"total_budget","value":"null","type":"object"},{"id":"ad017264-5276-4798-91e5-7bf6f8a07b31","name":"subsidy_amount_type","value":"text","type":"string"},{"id":"0839db3e-060e-4a18-9831-915f28600652","name":"total_budget_type","value":"text","type":"string"},{"id":"75a37755-271f-4797-a2c7-cf650db294e8","name":"source","value":"한국환경산업기술원","type":"string"},{"id":"e9fe45e7-7eff-4e79-b8f8-91e76209dc2e","name":"reqst_mth_papers_cn","value":"={{ $('Code3').item.json.output.reqst_mth_papers_cn }}","type":"string"},{"id":"5cff9144-b022-4c25-820e-86ab012b1321","name":"subsidy_amount","value":"={{ $('Code3').item.json.output.subsidy_amount }}","type":"string"},{"id":"576eb6a4-e3a6-4c33-812c-e9cd0823b08c","name":"self_contribution_rate","value":"={{ $('Code3').item.json.output.self_contribution_rate }}","type":"string"},{"id":"43c7d965-2238-45ca-9747-6a7d29a31896","name":"support_target","value":"={{ $('Code3').item.json.output.target_nm }}","type":"string"},{"id":"5b6af3c3-cb7c-4c9e-bba9-a613a8ba3825","name":"bonus_points_factors","value":"={{ $('Code3').item.json.output.bonus_points_factors }}","type":"string"},{"id":"3e892a8d-2f7a-4545-926c-16c4f7a624ab","name":"total_budget","value":"={{ $('Code3').item.json.output.total_budget }}","type":"string"},{"id":"16575838-a2c6-459b-9593-77cebceffb55","name":"exc_instt_nm","value":"={{ $('Code3').item.json.output.jrsd_instt_nm }}","type":"string"},{"id":"ab30e3a5-d994-4302-96fb-a58e143d2664","name":"creat_p_nttm","value":"={{ $now }}","type":"string"},{"id":"f58f94d3-a247-4d65-9cc7-6660c352ff5d","name":"created_ts","value":"={{ $now }}","type":"string"},{"id":"606a04e2-bf9c-4b9e-819f-48ed474ef929","name":"pldir_sport_realm_lclas_code_nm","value":"기술","type":"string"},{"id":"aff536ed-a418-4150-b586-d8f02a29010a","name":"is_classified","value":"H","type":"string"},{"id":"f4685b5a-7d5e-429e-8b02-ac3af4c1cdfb","name":"del_yn","value":"N","type":"string"},{"id":"2e6a52c6-c24f-4166-bf86-7e02dc483086","name":"hide_yn","value":"N","type":"string"},{"id":"48fd8d26-9789-4115-a6b6-1617e1808bd4","name":"pblanc_url","value":"=https://www.keiti.re.kr{{$('retrieve').first().json.link}}","type":"string"},{"id":"867f987e-d99b-479f-a00b-50017181549b","name":"main_category","value":"={{ $('Code3').item.json.output.main_category }}","type":"string"},{"id":"73a74bc1-6a90-40da-896a-5a282e586fd6","name":"sub_category","value":"={{ $('Code3').item.json.output.sub_category }}","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[4688,0],"id":"456d7cd1-1396-4025-a14d-b49c66259dfc","name":"ai result1"},{"parameters":{"url":"={{ $('settings').item.json.base_url }}{{ $json.attachment }}","options":{"response":{"response":{"responseFormat":"file"}}}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[3344,-288],"id":"96b5aa78-3e7b-40c2-b5d5-81734566c6ec","name":"request attachment file1"},{"parameters":{"method":"POST","url":"https://api.mistral.ai/v1/files","authentication":"predefinedCredentialType","nodeCredentialType":"mistralCloudApi","sendBody":true,"contentType":"multipart-form-data","bodyParameters":{"parameters":[{"name":"purpose","value":"ocr"},{"parameterType":"formBinaryData","name":"=file","inputDataFieldName":"data"}]},"options":{"allowUnauthorizedCerts":false}},"id":"c867e102-31fe-4138-93fd-69b52ab2847f","name":"Upload a img1","type":"n8n-nodes-base.httpRequest","position":[3760,-320],"typeVersion":4.2,"alwaysOutputData":true,"credentials":{"mistralCloudApi":{"id":"DMvGIk4nGb1Gfy0K","name":"Mistral Cloud account 2"}}},{"parameters":{"url":"=https://api.mistral.ai/v1/files/{{ $json.id }}/url","authentication":"predefinedCredentialType","nodeCredentialType":"mistralCloudApi","sendQuery":true,"queryParameters":{"parameters":[{"name":"expiry","value":"24"}]},"options":{"allowUnauthorizedCerts":false}},"id":"f57eb41b-c96c-460b-ad96-08e5622a3b89","name":"Retrieve img3","type":"n8n-nodes-base.httpRequest","position":[4304,-320],"typeVersion":4.2,"credentials":{"mistralCloudApi":{"id":"DMvGIk4nGb1Gfy0K","name":"Mistral Cloud account 2"}}},{"parameters":{"method":"POST","url":"https://api.mistral.ai/v1/chat/completions","authentication":"predefinedCredentialType","nodeCredentialType":"mistralCloudApi","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Content-Type","value":"application/json"}]},"sendBody":true,"specifyBody":"json","jsonBody":"={\n  \"model\": \"mistral-small-latest\",\n  \"messages\": [\n    {\n      \"role\": \"user\",\n      \"content\": [\n        {\n          \"type\": \"text\",\n          \"text\": \"첨부한 PDF에서 pblanc_nm(공고제목), jrsd_instt_nm(대상 지역), 주최기관(exc_instt_nm), bsns_sumry_cn(공고요약), target_nm(대상기업), reqst_begin_end_de(공고 전체기간 형식은 'YYYYMMDD ~ YYYYMMDD'), reqst_begin_dt(공고시작기간 YYYY-MM-DD), reqst_end_dt(공고마감기간 YYYY-MM-DD), reqst_mth_papers_cn(사업신청방법), refrnc_nm(문의처), 지원금액(subsidy_amount), 가점요소(bonus_points_factors), 예산(total_budget), 자부담률(self_contribution_rate) 에 대한 정보를 알려줘. 만약 자료가 없다면 null으로라도 알려줘. 응답은 json 형태야.\\n\\n또한 지역명(jrsd_instt_nm)은 {{ $('settings').item.json.cityMap.values() }} 중 하나로 출력되게 해주고, 만약 없다면 null로 출력해줘. 그리고 reqst_begin_end_de(공고 전체기간)의 형식은 반드시 'YYYYMMDD ~ YYYYMMDD'의 형태로 해줘. 그리고 대상기업(target_nm)은 중소기업,대기업 중 골라서 해주고 둘 다 지원한다면 '중소기업,대기업'으로 출력해줘. 알 수 없으면 null이야.\\n\\nmain_category: 공고의 주요 분류를 다음 항목 중에서 정확하게 추출해줘. 해당되는 항목이 여러 개인 경우 콤마(,)로 구분해서 출력해줘. 아래 항목 중 적절한 키워드가 공고 내용에 존재할 경우, 가장 가까운 항목으로 판단해서 선택해줘. 단, 명확한 키워드가 없거나 분류하기 애매한 경우에는 빈 문자열(\\\"\\\")로 표시해줘.\\n\\n[선택 가능한 항목 목록]\\n스마트생태공장,상생협력 실증프로그램,스마트공장 / 제조혁신,탄소중립 / 온실가스저감,FEMS 에너지효율화,마케팅 / 기술인프라 구축\\n\\n출력 예시:\\n\\\"컨설팅,스마트생태공장\\\"\\n\\n---\\n\\nsub_category: 공고 내용 중 다음 설비 목록에서 언급된 항목만 골라 콤마(,)로 구분하여 출력해줘. 유사 표현이 있을 경우 판단해서 포함해도 되지만, 아래 목록에 없는 항목은 절대 추가하지 마세요. 어떤 설비도 언급되지 않았을 경우에는 빈 문자열(\\\"\\\")로 출력해줘.\\n\\n[설비 목록]\\n변압기, 폐유재활용설비, 송풍기, 신재생발전설비, 집진기, 펌프, 콤프레셔, 공기조화기, 열회수환기장치, 보일러, 열교환기, 배출가스처리기, 공기정화기, 탈황기, 탈질기, 오수처리기, 폐수처리기, 냉각탑, 에너지관리시스템, 공정제어시스템, 자동화시스템, 냉동기, 증기재압축장치, 폐열회수시스템, 유수분리기, 압축기, 인버터, 용해로, 응축수회수기, 악취저감설비, 사출성형기\\n\\n출력 예시:\\n\\\"인버터,용해로\\\"\\n\\n주의사항:\\n- 설비 이름은 반드시 위 목록에서만 선택해야 하며, 새로운 항목을 생성하거나 임의로 추가하지 말 것\\n- 관련성이 낮거나 판단이 어려울 경우에도 빈 문자열(\\\"\\\")로 처리할 것\\n- 출력은 항상 문자열이며, null이 아닌 빈 문자열(\\\"\\\")로 표시\"\n        },\n        {\n          \"type\": \"document_url\",\n          \"document_url\": \"{{ $json.url }}\"\n        }\n      ]\n    }\n  ],\n  \"document_image_limit\": 8,\n  \"document_page_limit\": 64\n}","options":{"allowUnauthorizedCerts":false,"response":{"response":{"responseFormat":"json"}}}},"id":"96fa6524-8e17-428b-af7d-ca36b0097fa1","name":"do documnet qna","type":"n8n-nodes-base.httpRequest","position":[4464,-320],"typeVersion":4.2,"alwaysOutputData":true,"credentials":{"mistralCloudApi":{"id":"DMvGIk4nGb1Gfy0K","name":"Mistral Cloud account 2"}}},{"parameters":{"url":"=https://api.mistral.ai/v1/files/{{ $json.id }}","authentication":"predefinedCredentialType","nodeCredentialType":"mistralCloudApi","options":{"allowUnauthorizedCerts":false}},"id":"f2484199-168d-470b-8f09-e51719d905ef","name":"Retrieve img1","type":"n8n-nodes-base.httpRequest","position":[4144,-320],"typeVersion":4.2,"credentials":{"mistralCloudApi":{"id":"DMvGIk4nGb1Gfy0K","name":"Mistral Cloud account 2"}}},{"parameters":{"jsCode":"function extractJsonFromString(str) {\n  const jsonMatch = str.match(/```json\\s*([\\s\\S]*?)\\s*```/);\n  if (jsonMatch && jsonMatch[1]) {\n    try {\n      return JSON.parse(jsonMatch[1]);\n    } catch (e) {\n      console.error(\"JSON 파싱 에러:\", e);\n    }\n  }\n  return null;\n}\n\nreturn {a: extractJsonFromString($input.first().json.choices[0].message.content)}"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[4640,-320],"id":"4f5c4ed8-0311-45f9-9057-295248a5104c","name":"markdown json parse to json"},{"parameters":{"method":"POST","url":"https://www.keiti.re.kr/site/keiti/ex/board/List.do?cbIdx=277","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Content-Type","value":"application/x-www-form-urlencoded"}]},"sendBody":true,"bodyParameters":{"parameters":[{"name":"pageIndex","value":"1"},{"name":"searchExt1","value":"24000100"},{"name":"searchCondition","value":"titlecontents"},{"name":"searchKeyword"}]},"options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-384,-16],"id":"84804f1d-f370-4a2c-821b-f93fdee95307","name":"HTTP Request2"},{"parameters":{"operation":"extractHtmlContent","extractionValues":{"values":[{"key":"offset","cssSelector":"a.last","returnValue":"attribute","attribute":"href"}]},"options":{}},"type":"n8n-nodes-base.html","typeVersion":1.2,"position":[-224,-16],"id":"f389066e-296c-44fb-a599-144cfc950cc1","name":"extract maximum page"},{"parameters":{"jsCode":"const str = $input.first().json.offset;\n// const match = str.match(/doBbsContentFPag\\((\\d+)\\)/);\nconst match = str.split('=')\nconsole.log(match)\nvar offset = 0;\nif (match.length > 0) {\n  offset = parseInt(match[1]);\n} \nvar result = [];\nfor(var i=1; i<=offset;i ++) {\n  result.push({i, task_id: $('clickUp created task variables').first().json.id});\n}\n\nreturn result;\n\n"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[0,-16],"id":"2dba12fa-5a68-4b17-92a9-f955714cc58c","name":"Code1"},{"parameters":{"options":{"reset":"={{ $node[\"paging batch\"].context[\"done\"] }}"}},"type":"n8n-nodes-base.splitInBatches","typeVersion":3,"position":[288,-16],"id":"6ef47c81-4fce-465d-ba31-3eb02b23f1ab","name":"paging batch"},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"aa4120f9-3c5f-4906-af83-ebcc52b65902","leftValue":"={{ $json.attachment_name }}","rightValue":".pdf","operator":{"type":"string","operation":"endsWith"}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[2880,-288],"id":"d6d817bc-9987-4e8d-874d-69d9e823402a","name":"is it pdf"},{"parameters":{"url":"https://www.motie.go.kr","sendHeaders":true,"headerParameters":{"parameters":[{"name":"cookie","value":"={{ $response.headers[\"set-cookie\"]}}"}]},"options":{"redirect":{"redirect":{"followRedirects":false}},"response":{"response":{"fullResponse":true,"neverError":true}}}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-1120,704],"id":"0d97fd61-7dcc-407a-ace3-327aca6ea846","name":"HTTP Request3","onError":"continueRegularOutput"},{"parameters":{"jsCode":"return {cookie: $input.first().json.headers['set-cookie'][0]}"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[-944,704],"id":"5c3629b7-03c8-4eac-832a-8ebb6165e8d2","name":"Code2"},{"parameters":{"url":"https://www.motie.go.kr/kor/article/ATCLc01b2801b","sendHeaders":true,"headerParameters":{"parameters":[{"name":"cookie","value":"={{ $json.cookie }}"}]},"options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-768,704],"id":"67b0333e-bf3b-4b67-86cf-8c84da295d99","name":"HTTP Request4"},{"parameters":{"url":"https://www.motie.go.kr","sendHeaders":true,"headerParameters":{"parameters":[{"name":"cookie","value":"={{ $response.headers[\"set-cookie\"]}}"}]},"options":{"redirect":{"redirect":{"maxRedirects":2}},"response":{"response":{"fullResponse":true,"neverError":true}}}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-1056,944],"id":"8f5e73ba-6265-428d-8a7c-cc1ecf7545b1","name":"HTTP Request5","onError":"continueRegularOutput"},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"2a1018c7-3008-4e23-a1a1-1c3c5c5e03ff","leftValue":"={{ $('extract board detail items').item.json.board_date }}","rightValue":"={{ $today.minus(4, 'days') }}","operator":{"type":"dateTime","operation":"afterOrEquals"}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[1728,-16],"id":"cfc7c236-ad9f-4a08-bf46-e46d332daea6","name":"is it today"},{"parameters":{"team":"9018974484","space":"90185029606","folder":"90185783591","list":"901808746118","name":"={{ $today.format('yyyy-MM-dd') }} {{ $workflow.name }} 공지 크롤링 작업","additionalFields":{}},"type":"n8n-nodes-base.clickUp","typeVersion":1,"position":[-976,-16],"id":"1929c51e-95e4-4245-98e1-fbc059ffdb9e","name":"ClickUp","credentials":{"clickUpApi":{"id":"qZiwbTr68j7zNPAl","name":"ClickUp account"}},"disabled":true},{"parameters":{"assignments":{"assignments":[]},"includeOtherFields":true,"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[-800,-16],"id":"e79ca287-6a6f-4bab-8ce1-c2fcadb570b1","name":"clickUp created task variables"},{"parameters":{"operation":"update","id":"={{ $json.id }}","updateFields":{"status":"IN PROGRESS"}},"type":"n8n-nodes-base.clickUp","typeVersion":1,"position":[-576,-16],"id":"39f6b65e-63ce-4349-8a68-73ed6b3233ca","name":"ClickUp1","credentials":{"clickUpApi":{"id":"qZiwbTr68j7zNPAl","name":"ClickUp account"}},"disabled":true},{"parameters":{"resource":"comment","commentOn":"task","id":"={{ $json.task_id }}","commentText":"작업시작","additionalFields":{}},"type":"n8n-nodes-base.clickUp","typeVersion":1,"position":[1904,-784],"id":"802d0610-fb0c-4462-a962-ccc03b59f2b9","name":"Logging Job Result","credentials":{"clickUpApi":{"id":"qZiwbTr68j7zNPAl","name":"ClickUp account"}},"disabled":true},{"parameters":{"operation":"upsert","table":{"__rl":true,"value":"biz_info","mode":"list","cachedResultName":"biz_info"},"columnToMatchOn":"pblanc_nm","options":{"detailedOutput":true}},"type":"n8n-nodes-base.mySql","typeVersion":2.4,"position":[5008,0],"id":"9aa2242f-8041-4a6e-a75b-0481b33b9d9f","name":"MySQL2","alwaysOutputData":true,"credentials":{"mySql":{"id":"HSXhV0YEF0PlSVWX","name":"MySQL account"}},"onError":"continueErrorOutput"},{"parameters":{"jsCode":"$('settings').first().json['add-item-count'] = $('settings').first().json['add-item-count'] + 1\nreturn {\n        task_id: $('clickUp created task variables').first().json.id, \n         added_item_count: $('settings').first().json['add-item-count']\n       }"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[5184,-16],"id":"72b9ce3d-17d3-4b27-8853-4ed577a47617","name":"Updated item count add"},{"parameters":{"resource":"comment","commentOn":"task","id":"={{ $('clickUp created task variables').item.json.id }}","commentText":"={{ $('extract board detail items').item.json.title }} Has Error During insert DB","additionalFields":{}},"type":"n8n-nodes-base.clickUp","typeVersion":1,"position":[5120,224],"id":"3a91a21c-6617-4dda-a0c4-78545479324e","name":"ClickUp2","credentials":{"clickUpApi":{"id":"qZiwbTr68j7zNPAl","name":"ClickUp account"}}},{"parameters":{"resource":"comment","commentOn":"task","id":"={{ $('clickUp created task variables').item.json.id }}","commentText":"={{ $('extract board detail items').item.json.title }} Has Error During hwp file convert to pdf so retry with context","additionalFields":{}},"type":"n8n-nodes-base.clickUp","typeVersion":1,"position":[3264,-464],"id":"8ff9d311-c8f1-4561-ada9-d0388bb7a690","name":"ClickUp4","credentials":{"clickUpApi":{"id":"qZiwbTr68j7zNPAl","name":"ClickUp account"}},"disabled":true},{"parameters":{"resource":"comment","commentOn":"task","id":"={{ $('clickUp created task variables').item.json.id }}","commentText":"={{ $('extract board detail items').item.json.title }} Has Error During AI Request","additionalFields":{}},"type":"n8n-nodes-base.clickUp","typeVersion":1,"position":[3600,192],"id":"3daa1aa6-27c0-4386-843c-1e4b8d774969","name":"ClickUp3","credentials":{"clickUpApi":{"id":"qZiwbTr68j7zNPAl","name":"ClickUp account"}},"disabled":true},{"parameters":{"content":"주소\n\nhttps://www.keiti.re.kr/site/keiti/ex/board/List.do?cbIdx=277","height":80,"width":520},"type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[-1360,-144],"id":"6a52e59e-974b-4592-b2a3-90b37e8107d1","name":"Sticky Note"},{"parameters":{"jsCode":"// Loop over input items\nfor (const item of $input.all()) {\n  // 괄호 제거\n  if (item.json.pblanc_nm) {\n    item.json.pblanc_nm = item.json.pblanc_nm.replace(/[\\(\\[][^()\\[\\]]+[\\)\\]]/g, '').trim();\n  }\n\n  // 새 필드 추가\n  item.json.myNewField = 1;\n}\n\nreturn $input.all();\n"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[4032,0],"id":"35cdd595-2b51-4a75-a2db-1562de9cf5ed","name":"Code3"},{"parameters":{"operation":"select","table":{"__rl":true,"value":"biz_info","mode":"list","cachedResultName":"biz_info"},"where":{"values":[{"column":"pblanc_nm","condition":"LIKE","value":"={{ $json.a.pblanc_nm }}"}]},"options":{}},"type":"n8n-nodes-base.mySql","typeVersion":2.4,"position":[4240,0],"id":"6ce79781-949d-4a6a-a9a4-8fedc13c7b50","name":"MySQL1","alwaysOutputData":true,"credentials":{"mySql":{"id":"HSXhV0YEF0PlSVWX","name":"MySQL account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"2d3aee72-46af-4378-99b4-a974ed6c6c5c","leftValue":"={{ $json.pblanc_nm }}","rightValue":"","operator":{"type":"string","operation":"empty","singleValue":true}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[4400,0],"id":"f17c3eae-6628-4c53-beee-dfcac6cca784","name":"If1"},{"parameters":{"jsCode":"let title = $input.first().json.title || '';\n\n// 괄호 또는 대괄호 안의 내용 제거\ntitle = title.replace(/[\\(\\[][^()\\[\\]]+[\\)\\]]/g, '').trim();\n\nreturn [\n  {\n    json: {\n      title\n    }\n  }\n];\n\n\n"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[1840,-256],"id":"ee977619-25dd-4d86-aa63-3ae38cc6a4c7","name":"중복 자료 조회"},{"parameters":{"operation":"select","table":{"__rl":true,"value":"biz_info","mode":"list","cachedResultName":"biz_info"},"where":{"values":[{"column":"pblanc_nm","condition":"LIKE","value":"={{ $json.title }}"}]},"options":{}},"type":"n8n-nodes-base.mySql","typeVersion":2.4,"position":[1984,-256],"id":"f41b7663-0ebc-4f0d-8571-c8213da45a83","name":"중복조회 MYSQL","alwaysOutputData":true,"credentials":{"mySql":{"id":"HSXhV0YEF0PlSVWX","name":"MySQL account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"2d3aee72-46af-4378-99b4-a974ed6c6c5c","leftValue":"={{ $json.pblanc_nm }}","rightValue":"","operator":{"type":"string","operation":"empty","singleValue":true}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[2128,-256],"id":"2e189f82-cbdd-4a04-aef3-551568258483","name":"중복조회 IF"},{"parameters":{"rule":{"interval":[{"triggerAtHour":11,"triggerAtMinute":50}]}},"type":"n8n-nodes-base.scheduleTrigger","typeVersion":1.2,"position":[-1296,272],"id":"6cd54d4b-393c-427c-b1b3-a9fb6f39e35f","name":"Schedule Trigger"},{"parameters":{"table":{"__rl":true,"value":"n8n_crawl_summary","mode":"list","cachedResultName":"n8n_crawl_summary"},"dataMode":"defineBelow","valuesToSend":{"values":[{"column":"workflow_name","value":"={{ $workflow.name }}"},{"column":"total_count","value":"={{ $json.link.length }}"},{"column":"type","value":"total_count"}]},"options":{}},"type":"n8n-nodes-base.mySql","typeVersion":2.5,"position":[1232,512],"id":"e532f850-b92e-4ade-aadd-4d4f193b8492","name":"공고상태전체개수저장","credentials":{"mySql":{"id":"s7XNBHZtTOH7C66M","name":"MySQL account 2"}}},{"parameters":{"jsCode":"// Function 노드 안\nreturn [\n  {\n    json: {\n      workflowName: $workflow.name,\n      insertId:$input.first().json.data.insertId\n    }\n  }\n];\n"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[5184,-160],"id":"ad7b1f14-b4f0-47a2-a4b8-8ce5c272127a","name":"공고상태정리"},{"parameters":{"table":{"__rl":true,"value":"n8n_crawl_summary","mode":"list","cachedResultName":"n8n_crawl_summary"},"dataMode":"defineBelow","valuesToSend":{"values":[{"column":"workflow_name","value":"={{ $workflow.name }}"},{"column":"insertId","value":"={{ $json.insertId }}"},{"column":"type","value":"detail"}]},"options":{}},"type":"n8n-nodes-base.mySql","typeVersion":2.5,"position":[5392,-160],"id":"7d668897-33ba-4a9c-9a63-c966f47f827d","name":"공고상태상세저장","credentials":{"mySql":{"id":"s7XNBHZtTOH7C66M","name":"MySQL account 2"}}}],"connections":{"settings":{"main":[[{"node":"ClickUp","type":"main","index":0}]]},"HTTP Request":{"main":[[{"node":"extract board lists","type":"main","index":0}]]},"extract board lists":{"main":[[{"node":"retrieve","type":"main","index":0},{"node":"공고상태전체개수저장","type":"main","index":0}]]},"batch":{"main":[[{"node":"paging batch","type":"main","index":0}],[{"node":"HTTP Request1","type":"main","index":0}]]},"retrieve":{"main":[[{"node":"batch","type":"main","index":0}]]},"HTTP Request1":{"main":[[{"node":"extract board detail items","type":"main","index":0}]]},"extract board detail items":{"main":[[{"node":"is it today","type":"main","index":0}]]},"has attachment?":{"main":[[{"node":"it doesn't contain \"신청서\"","type":"main","index":0}],[{"node":"Code","type":"main","index":0}]]},"is it hwp":{"main":[[{"node":"request attachment file","type":"main","index":0}],[{"node":"is it pdf","type":"main","index":0}]]},"Convert Hwp to pdf":{"main":[[{"node":"Upload a img1","type":"main","index":0}],[{"node":"ClickUp4","type":"main","index":0}]]},"it doesn't contain \"신청서\"":{"main":[[{"node":"is it hwp","type":"main","index":0}],[{"node":"Code","type":"main","index":0}]]},"request attachment file":{"main":[[{"node":"Convert Hwp to pdf","type":"main","index":0}]]},"ai result":{"main":[[{"node":"MySQL2","type":"main","index":0}]]},"Google Gemini Chat Model2":{"ai_languageModel":[[{"node":"Basic LLM Chain1","type":"ai_languageModel","index":0}]]},"Structured Output Parser2":{"ai_outputParser":[[{"node":"Basic LLM Chain1","type":"ai_outputParser","index":0}]]},"Code":{"main":[[{"node":"Basic LLM Chain1","type":"main","index":0}]]},"Basic LLM Chain1":{"main":[[{"node":"Code3","type":"main","index":0}],[{"node":"ClickUp3","type":"main","index":0}]]},"ai result1":{"main":[[{"node":"MySQL2","type":"main","index":0}]]},"request attachment file1":{"main":[[{"node":"Upload a img1","type":"main","index":0}]]},"Upload a img1":{"main":[[{"node":"Retrieve img1","type":"main","index":0}]]},"Retrieve img3":{"main":[[{"node":"do documnet qna","type":"main","index":0}]]},"do documnet qna":{"main":[[{"node":"markdown json parse to json","type":"main","index":0}]]},"Retrieve img1":{"main":[[{"node":"Retrieve img3","type":"main","index":0}]]},"markdown json parse to json":{"main":[[{"node":"ai result","type":"main","index":0}]]},"HTTP Request2":{"main":[[{"node":"extract maximum page","type":"main","index":0}]]},"extract maximum page":{"main":[[{"node":"Code1","type":"main","index":0}]]},"Code1":{"main":[[{"node":"paging batch","type":"main","index":0}]]},"paging batch":{"main":[[],[{"node":"HTTP Request","type":"main","index":0}]]},"is it pdf":{"main":[[{"node":"request attachment file1","type":"main","index":0}],[{"node":"Code","type":"main","index":0}]]},"HTTP Request3":{"main":[[{"node":"Code2","type":"main","index":0}]]},"Code2":{"main":[[{"node":"HTTP Request4","type":"main","index":0}]]},"is it today":{"main":[[{"node":"중복 자료 조회","type":"main","index":0}],[]]},"ClickUp":{"main":[[{"node":"clickUp created task variables","type":"main","index":0}]]},"clickUp created task variables":{"main":[[{"node":"ClickUp1","type":"main","index":0}]]},"ClickUp1":{"main":[[{"node":"HTTP Request2","type":"main","index":0}]]},"Logging Job Result":{"main":[[]]},"MySQL2":{"main":[[{"node":"Updated item count add","type":"main","index":0},{"node":"공고상태정리","type":"main","index":0}],[{"node":"ClickUp2","type":"main","index":0}]]},"Updated item count add":{"main":[[{"node":"batch","type":"main","index":0}]]},"ClickUp2":{"main":[[{"node":"batch","type":"main","index":0}]]},"ClickUp4":{"main":[[{"node":"Code","type":"main","index":0}]]},"ClickUp3":{"main":[[{"node":"batch","type":"main","index":0}]]},"Code3":{"main":[[{"node":"MySQL1","type":"main","index":0}]]},"MySQL1":{"main":[[{"node":"If1","type":"main","index":0}]]},"If1":{"main":[[{"node":"ai result1","type":"main","index":0}]]},"중복 자료 조회":{"main":[[{"node":"중복조회 MYSQL","type":"main","index":0}]]},"중복조회 MYSQL":{"main":[[{"node":"중복조회 IF","type":"main","index":0}]]},"중복조회 IF":{"main":[[{"node":"has attachment?","type":"main","index":0}],[{"node":"batch","type":"main","index":0}]]},"Schedule Trigger":{"main":[[{"node":"settings","type":"main","index":0}]]},"공고상태정리":{"main":[[{"node":"공고상태상세저장","type":"main","index":0}]]}},"settings":{"executionOrder":"v1","callerPolicy":"workflowsFromSameOwner","errorWorkflow":"Mlhukb9mbuzpvwkH"},"staticData":{"node:Schedule Trigger":{"recurrenceRules":[]}},"meta":{"templateCredsSetupCompleted":true},"pinData":{},"versionId":"2bcfbf76-d956-4ecb-9b69-5ea744ebf04e","triggerCount":1,"shared":[{"createdAt":"2025-06-18T00:08:55.755Z","updatedAt":"2025-06-18T00:08:55.755Z","role":"workflow:owner","workflowId":"NjJ9lFQPQIhxfm8U","projectId":"YGqg9zdxGQSC73yC"}],"tags":[]}