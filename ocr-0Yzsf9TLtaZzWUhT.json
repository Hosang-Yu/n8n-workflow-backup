{"createdAt":"2025-06-02T04:13:45.400Z","updatedAt":"2025-06-20T00:19:39.390Z","id":"0Yzsf9TLtaZzWUhT","name":"ocr","active":false,"isArchived":true,"nodes":[{"parameters":{},"type":"n8n-nodes-base.manualTrigger","typeVersion":1,"position":[0,0],"id":"8cb6bb49-ba00-47f2-8557-1b5be4a00529","name":"When clicking ‘Execute workflow’"},{"parameters":{"jsCode":"import { Mistral } from \"@mistralai/mistralai\";\n// import fs from 'fs';\n\n// Retrieve the API key from environment variables\nconst apiKey = process.env[\"MISTRAL_API_KEY\"];\n\nconst client = new Mistral({\n  apiKey: apiKey,\n});\n\n// If local document, upload and retrieve the signed url\n// const uploaded_file = fs.readFileSync('uploaded_file.pdf');\n// const uploaded_pdf = await client.files.upload({\n//     file: {\n//         fileName: \"uploaded_file.pdf\",\n//         content: uploaded_file,\n//     },\n//     purpose: \"ocr\"\n// });\n// const signedUrl = await client.files.getSignedUrl({\n//     fileId: uploaded_pdf.id,\n// });\n\nconst chatResponse = await client.chat.complete({\n  model: \"mistral-small-latest\",\n  messages: [\n    {\n      role: \"user\",\n      content: [\n        {\n          type: \"text\",\n          text: \"what is the last sentence in the document\",\n        },\n        {\n          type: \"document_url\",\n          documentUrl: \"https://arxiv.org/pdf/1805.04770\",\n          // documentUrl: signedUrl.url\n        },\n      ],\n    },\n  ],\n});\n\nconsole.log(\"JSON:\", chatResponse.choices[0].message.content);"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[220,0],"id":"5b97f64e-4eb0-4aa0-b4b1-29322d986cc3","name":"Code"}],"connections":{"When clicking ‘Execute workflow’":{"main":[[{"node":"Code","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{},"versionId":"da5d91ff-3b04-4459-b4a2-4244940dcd88","triggerCount":0,"shared":[{"createdAt":"2025-06-02T04:13:45.400Z","updatedAt":"2025-06-02T04:13:45.400Z","role":"workflow:owner","workflowId":"0Yzsf9TLtaZzWUhT","projectId":"YGqg9zdxGQSC73yC"}],"tags":[]}